<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-resources/high-performance-computing/how-to-build-slurm-scalable-using-ansible/deployment" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Deployment | RiverXData</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://riverxdata.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://riverxdata.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://riverxdata.github.io/docs/resources/high-performance-computing/how-to-build-slurm-scalable-using-ansible/deployment"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="bioinformatics, data, infrastructure, hpc, cloud"><meta data-rh="true" name="author" content="RiverXData Team"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Deployment | RiverXData"><meta data-rh="true" name="description" content="Ansible introduction"><meta data-rh="true" property="og:description" content="Ansible introduction"><link data-rh="true" rel="icon" href="/img/logo-riverxdata-02.png"><link data-rh="true" rel="canonical" href="https://riverxdata.github.io/docs/resources/high-performance-computing/how-to-build-slurm-scalable-using-ansible/deployment"><link data-rh="true" rel="alternate" href="https://riverxdata.github.io/docs/resources/high-performance-computing/how-to-build-slurm-scalable-using-ansible/deployment" hreflang="en"><link data-rh="true" rel="alternate" href="https://riverxdata.github.io/docs/resources/high-performance-computing/how-to-build-slurm-scalable-using-ansible/deployment" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Scalable HPC","item":"https://riverxdata.github.io/docs/category/scalable-hpc"},{"@type":"ListItem","position":2,"name":"Deployment","item":"https://riverxdata.github.io/docs/resources/high-performance-computing/how-to-build-slurm-scalable-using-ansible/deployment"}]}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0BBYTVWQV2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-0BBYTVWQV2",{anonymize_ip:!0})</script>




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.71c8ea25.css">
<script src="/assets/js/runtime~main.d0bf80e0.js" defer="defer"></script>
<script src="/assets/js/main.0ae7fef3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo-riverxdata-02.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style="background-color:#667eea;color:#ffffff" role="banner"><div class="content_knG7 announcementBarContent_xLdY">Comming soon: Support us on GitHub Sponsors! ❤️</div></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-riverxdata-02.png" alt="RiverXData" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo-riverxdata-02.png" alt="RiverXData" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/overview">Documentation</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/riverxdata/river" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/overview"><span title="Overview" class="categoryLinkLabel_W154">Overview</span></a><button aria-label="Expand sidebar category &#x27;Overview&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/usage/Role"><span title="Usage" class="categoryLinkLabel_W154">Usage</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/platform/Deployment"><span title="Platform" class="categoryLinkLabel_W154">Platform</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/analysis/Development"><span title="Analysis" class="categoryLinkLabel_W154">Analysis</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/resources/administration/environment"><span title="Resources" class="categoryLinkLabel_W154">Resources</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/resources/administration/environment"><span title="Administration" class="categoryLinkLabel_W154">Administration</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/resources/high-performance-computing/high-performance-computing-overview"><span title="HPC" class="categoryLinkLabel_W154">HPC</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resources/high-performance-computing/high-performance-computing-overview"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resources/high-performance-computing/slurm-architecture"><span title="Architecture" class="linkLabel_WmDU">Architecture</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resources/high-performance-computing/how-to-build-slurm-single-node-with-full-functions"><span title="Single Node Slurm Setup" class="linkLabel_WmDU">Single Node Slurm Setup</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/scalable-hpc"><span title="Scalable HPC" class="categoryLinkLabel_W154">Scalable HPC</span></a><button aria-label="Collapse sidebar category &#x27;Scalable HPC&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resources/high-performance-computing/how-to-build-slurm-scalable-using-ansible/overview"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/resources/high-performance-computing/how-to-build-slurm-scalable-using-ansible/deployment"><span title="Deployment" class="linkLabel_WmDU">Deployment</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resources/high-performance-computing/how-to-build-slurm-scalable-using-ansible/administration"><span title="Administration" class="linkLabel_WmDU">Administration</span></a></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/case-studies/Overview"><span title="Case studies" class="categoryLinkLabel_W154">Case studies</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Resources</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">HPC</span></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/scalable-hpc"><span>Scalable HPC</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Deployment</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Deployment</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="ansible-introduction">Ansible introduction<a href="#ansible-introduction" class="hash-link" aria-label="Direct link to Ansible introduction" title="Direct link to Ansible introduction" translate="no">​</a></h2>
<p>To understand Ansible in brief, watch this</p>
<div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%;background:#000"><iframe src="https://www.youtube.com/embed/xRMPKQweySE" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" style="position:absolute;top:0;left:0;width:100%;height:100%"></iframe></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="overview-on-notebook">Overview on notebook<a href="#overview-on-notebook" class="hash-link" aria-label="Direct link to Overview on notebook" title="Direct link to Overview on notebook" translate="no">​</a></h2>
<p>Compared with previous set up on a single node cluster, this ansible is not only set up slurm with seperated between the master and workers nodes,
but also install the</p>
<ul>
<li class="">
<p><strong>Monitor Server:</strong></p>
<ul>
<li class="">geerlingguy.docker: Docker container</li>
<li class="">Prometheus: Monitoring metrics collection</li>
<li class="">Alertmanager: Alerts to Slack channel with specific rules (e.g., down node)</li>
<li class="">Grafana: Dashboard for monitoring usage</li>
</ul>
</li>
<li class="">
<p><strong>Slurm HPC:</strong></p>
<ul>
<li class=""><strong>Common Roles:</strong>
<ul>
<li class="">geerlingguy.docker (only for sudo group users)</li>
<li class="">alertmanager</li>
<li class="">grafana</li>
<li class="">prometheus-slurm-exporter</li>
<li class="">prometheus-node-exporter</li>
</ul>
</li>
<li class=""><strong>Specific Nodes:</strong>
<ul>
<li class=""><strong>Controller Node:</strong>
<ul>
<li class="">slurm-master: Controller and login node</li>
<li class="">rsyslog-server: Syslog server controller</li>
<li class="">nfs-server: Network file system to share files across clusters</li>
</ul>
</li>
<li class=""><strong>Worker Nodes:</strong>
<ul>
<li class="">slurm-worker: Computing nodes</li>
<li class="">rsyslog-client: Syslog client worker</li>
<li class="">nfs-client: Access files on the controller</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>To set up the cluster with many steps, IT automation tools likes Ansible, Puppet, Terraform are used to handle it automatically.
In RiverXData ecosystem, we set up the Slurm cluster using <a href="https://docs.ansible.com/" target="_blank" rel="noopener noreferrer" class=""><strong>Ansible</strong></a>, to set up the slurm cluster, follow the documentation at this <a href="https://github.com/riverxdata/river-slurm/tree/main" target="_blank" rel="noopener noreferrer" class=""><strong>RIVERXDATA SLURM</strong></a></p>
<figure markdown="span"><p><img decoding="async" loading="lazy" alt="cluster" src="/assets/images/slurm-e2bd62c31ed705955e53c1a6cbfc917f.svg" class="img_ev3q"></p></figure>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="install-required-python-packages">Install required python packages<a href="#install-required-python-packages" class="hash-link" aria-label="Direct link to Install required python packages" title="Direct link to Install required python packages" translate="no">​</a></h2>
<p>Clone the repo</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">git</span><span class="token plain"> clone https://github.com/riverxdata/river-slurm.git </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-b</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">1.0</span><span class="token plain">.0</span><br></span></code></pre></div></div>
<p>Install ansible, other required python packages and relative roles</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># to show agruments</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># bash scripts/setup.sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">bash</span><span class="token plain"> scripts/setup.sh </span><span class="token number" style="color:hsl(35, 99%, 36%)">24.04</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(35, 99%, 36%)">false</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="alert-system-via-slack">Alert system via Slack<a href="#alert-system-via-slack" class="hash-link" aria-label="Direct link to Alert system via Slack" title="Direct link to Alert system via Slack" translate="no">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>In an industrial setting, even small teams benefit from effective communication through chat applications. Slack is a widely-used app that facilitates this. It offers features such as custom webhooks, which are useful for infrastructure monitoring notifications. For more information, visit the <a href="https://api.slack.com/quickstart" target="_blank" rel="noopener noreferrer" class=""><strong>Slack API Quickstart</strong></a>.</p></div></div>
<p>You should have a slack workspace, where you already created a specific channel for this notifications</p>
<p><strong>Step 1</strong>: Create an app</p>
<figure markdown="span"><p><img decoding="async" loading="lazy" alt="cluster" src="/assets/images/create_app-5f947edfa49ffbdf36fe676be2c07ec2.png" width="1093" height="731" class="img_ev3q"></p></figure>
<p><strong>Step 2</strong>: Add app to your channel, configure it with the webhook features</p>
<figure markdown="span"><p><img decoding="async" loading="lazy" alt="cluster" src="/assets/images/config_1-9d474b122b801e342837ef04c9f5830e.png" width="1093" height="1115" class="img_ev3q"></p></figure>
<p><strong>Step 3</strong>: Click to incomming webhooks and activate it</p>
<figure markdown="span"><p><img decoding="async" loading="lazy" alt="cluster" src="/assets/images/config_2-00d5027252e91dfd879cc3493c03dec6.png" width="1093" height="1115" class="img_ev3q"></p></figure>
<p><strong>Step 4</strong>: Try with api to check the app work</p>
<figure markdown="span"><p><img decoding="async" loading="lazy" alt="cluster" src="/assets/images/config_3-d3746310237e6ce3e41c3e02e9659122.png" width="1093" height="1115" class="img_ev3q"></p></figure>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>To check for api setting, try with this on your terminal</p></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-X</span><span class="token plain"> POST </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-H</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;Content-type: application/json&#x27;</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--data</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;{&quot;text&quot;:&quot;Hello, World!&quot;}&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">API</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><br></span></code></pre></div></div>
<p><strong>Step 5</strong>: See how it run in real case
App is added in channel</p>
<figure markdown="span"><p><img decoding="async" loading="lazy" alt="cluster" src="/assets/images/resume_node-7e21b97ade95598e247fe80abd75ce91.png" width="1059" height="420" class="img_ev3q"></p></figure>
<p>For detail, check at grafana dashboard</p>
<figure markdown="span"><p><img decoding="async" loading="lazy" alt="cluster" src="/assets/images/grafana_down-e246254641a25b9312cfa3800cc99bb1.png" width="2560" height="1283" class="img_ev3q"></p></figure>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="prepare-inventory-for-hosts">Prepare Inventory for Hosts<a href="#prepare-inventory-for-hosts" class="hash-link" aria-label="Direct link to Prepare Inventory for Hosts" title="Direct link to Prepare Inventory for Hosts" translate="no">​</a></h2>
<p>For the password, it should be configured using <a href="https://docs.ansible.com/ansible/2.8/user_guide/vault.html" target="_blank" rel="noopener noreferrer" class=""><strong>ansible vault</strong></a> with encrypted, decrypted secret variables
Copy the example <code>hosts.example</code> file in the inventories directory. In this file, define the user and host for your setup:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">[slurm_master]</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">controller-01 ansible_host=192.168.58.10</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">[slurm_worker]</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">worker-01 ansible_host=192.168.58.11</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">[slurm:children]</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">slurm_master</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">slurm_worker</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">[all:vars]</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">ansible_user=vagrant</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">slurm_password=&lt;password for Munge to authenticate via symmetric key&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">slurm_account_db_pass=&lt;slurm account database password&gt;</span><br></span></code></pre></div></div>
<p>Optional parameters:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">default_password=&lt;default password for users in the cluster; first login will enforce a password change&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">users=&lt;comma-separated list of new usernames&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">slack_api_url=&lt;Slack webhook URL for cluster status notifications&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">slack_channel=&lt;Slack channel for notifications&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">admin_user =&lt;Grafana admin user&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">admin_password=&lt;Grafana admin password&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="run-playbook-for-cluster">Run playbook for Cluster<a href="#run-playbook-for-cluster" class="hash-link" aria-label="Direct link to Run playbook for Cluster" title="Direct link to Run playbook for Cluster" translate="no">​</a></h2>
<p>To set up on your cluster, ensure that the remote nodes can log in without a password. Run the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">ansible-playbook </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-i</span><span class="token plain"> inventories/hosts river_cluster.yml</span><br></span></code></pre></div></div>
<p>If a password is required, add the <code>--ask-become-pass</code> flag and run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">ansible-playbook </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-i</span><span class="token plain"> inventories/hosts river_cluster.yml --ask-become-pass</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="run-playbook-for-user">Run playbook for User<a href="#run-playbook-for-user" class="hash-link" aria-label="Direct link to Run playbook for User" title="Direct link to Run playbook for User" translate="no">​</a></h2>
<p>To set up users on the cluster, use Ansible. NIS is less secure and other methods are not well supported for Ubuntu. Simply run the following command to add users:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">ansible-playbook </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-i</span><span class="token plain"> inventories/hosts river_users.yml</span><br></span></code></pre></div></div>
<p>Validate setup</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># get cluster info</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">sinfo</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># get current job</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">squeue</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># submit interactive</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">srun </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--pty</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">bash</span><br></span></code></pre></div></div>
<p>By default, the grafana runs on the master node on port 3000. With users and password are set on the inventories
To access the dashboard, while you do not access the master node directly, use ssh</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">ssh</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-N</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-L</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">3001</span><span class="token plain">:localhost:3000 </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">user name</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">@</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">host name or IP address</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="monitor-system">Monitor system<a href="#monitor-system" class="hash-link" aria-label="Direct link to Monitor system" title="Direct link to Monitor system" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="node-metrics">Node metrics<a href="#node-metrics" class="hash-link" aria-label="Direct link to Node metrics" title="Direct link to Node metrics" translate="no">​</a></h3>
<figure markdown="span"><p><img decoding="async" loading="lazy" alt="Node metrics" src="/assets/images/node_grafana-1be3b4d9f0352987567947a207197a5a.png" width="2559" height="1293" class="img_ev3q"></p></figure>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="slurm-metrics">Slurm metrics<a href="#slurm-metrics" class="hash-link" aria-label="Direct link to Slurm metrics" title="Direct link to Slurm metrics" translate="no">​</a></h3>
<figure markdown="span"><p><img decoding="async" loading="lazy" alt="Slurm metrics" src="/assets/images/slurm_grafana-d38acb72e98a3d7cd3a9fa5fbfcfd88e.png" width="2559" height="1293" class="img_ev3q"></p></figure>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="developer">Developer<a href="#developer" class="hash-link" aria-label="Direct link to Developer" title="Direct link to Developer" translate="no">​</a></h2>
<p>Install vagrant and relative provider, for Ubuntu, it automatically install the libvirt and run the ansible playbook</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">bash</span><span class="token plain"> scripts/setup.sh </span><span class="token number" style="color:hsl(35, 99%, 36%)">24.04</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(35, 99%, 36%)">true</span><br></span></code></pre></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/resources/high-performance-computing/how-to-build-slurm-scalable-using-ansible/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Overview</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/resources/high-performance-computing/how-to-build-slurm-scalable-using-ansible/administration"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Administration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ansible-introduction" class="table-of-contents__link toc-highlight">Ansible introduction</a></li><li><a href="#overview-on-notebook" class="table-of-contents__link toc-highlight">Overview on notebook</a></li><li><a href="#install-required-python-packages" class="table-of-contents__link toc-highlight">Install required python packages</a></li><li><a href="#alert-system-via-slack" class="table-of-contents__link toc-highlight">Alert system via Slack</a></li><li><a href="#prepare-inventory-for-hosts" class="table-of-contents__link toc-highlight">Prepare Inventory for Hosts</a></li><li><a href="#run-playbook-for-cluster" class="table-of-contents__link toc-highlight">Run playbook for Cluster</a></li><li><a href="#run-playbook-for-user" class="table-of-contents__link toc-highlight">Run playbook for User</a></li><li><a href="#monitor-system" class="table-of-contents__link toc-highlight">Monitor system</a><ul><li><a href="#node-metrics" class="table-of-contents__link toc-highlight">Node metrics</a></li><li><a href="#slurm-metrics" class="table-of-contents__link toc-highlight">Slurm metrics</a></li></ul></li><li><a href="#developer" class="table-of-contents__link toc-highlight">Developer</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/overview">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.facebook.com/groups/1134438583997171" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/riverxdata/river" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://riverxdata.github.ios" target="_blank" rel="noopener noreferrer" class="footer__link-item">About RiverXData<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2026 RiverXData</div></div></div></footer></div>
</body>
</html>