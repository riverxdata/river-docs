"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[9825],{49877(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>d,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"platform/Deployment","title":"Deployment","description":"River consists of the following components:","source":"@site/docs/3.platform/1.Deployment.md","sourceDirName":"3.platform","slug":"/platform/Deployment","permalink":"/river-docs/docs/platform/Deployment","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Viewer","permalink":"/river-docs/docs/usage/Viewer"},"next":{"title":"Development","permalink":"/river-docs/docs/platform/Development"}}');var s=r(74848),o=r(28453);const d={},i=void 0,c={},l=[{value:"Configuration",id:"configuration",level:2},{value:"Deployment",id:"deployment",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"River consists of the following components:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Backend"}),": Asynchronous web server built with BlackSheep, a high-performance Python framework. Utilizes PostgreSQL for the database, Redis for caching, and Celery for job task monitoring."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Frontend"}),": React.js application powered by Vite and Material UI (MUI) for the user interface."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Traefik"}),": Modern reverse proxy used for routing and load balancing."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Clone the repository and start to configure ",(0,s.jsx)(n.code,{children:".env"})," from ",(0,s.jsx)(n.code,{children:".env.template"}),". You should use the latest official release version.\nIn case of using the latest features eventhough it is under development, you can try to use ",(0,s.jsx)(n.code,{children:"dev"})," branch."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"git clone git@github.com:riverxdata/river.git -b 1.1.0\n"})}),"\n",(0,s.jsx)(n.p,{children:"You should deploy your own platform"}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["On your remote server where you configure the platform, it required to install ",(0,s.jsx)(n.code,{children:"docker"})]})}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.code,{children:".env"})," file is required for deployment. To quick setup for validation, the committed ",(0,s.jsx)(n.code,{children:".env"})," can be used. The Google Client ID can be used safelly.\nIt can be deployed using ",(0,s.jsx)(n.code,{children:"docker compose"})," on cloud. Beside, the Google Client ID, follow ",(0,s.jsx)(n.a,{href:"https://developers.google.com/identity/protocols/oauth2",children:"here"}),". For user to test after deployment, follow\n",(0,s.jsx)(n.code,{children:"##Developer"})," to simulate the approriate services for testing purpose. Bedefault, the ",(0,s.jsx)(n.code,{children:".env"})," is used for staging only which supports the localhost setup. For binding the domain to a VPS, please adjust the domain name\nfor ",(0,s.jsx)(n.code,{children:"VITE_BACKEND_URL"}),", ",(0,s.jsx)(n.code,{children:"FRONTEND_URL"})," and ",(0,s.jsx)(n.code,{children:"URL"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Please adjust your setup on the .env file. For the detail explaination of the variables, see below:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Variable Name"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Example Value"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"LETSENCRYPT_EMAIL"})}),(0,s.jsx)(n.td,{children:"Email address for Let's Encrypt SSL certificate registration."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"nttg8100@gmail.com"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"VITE_BACKEND_URL"})}),(0,s.jsx)(n.td,{children:"Backend API URL for the frontend to connect to."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"http://localhost"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"FRONTEND_URL"})}),(0,s.jsx)(n.td,{children:"URL where the frontend is served."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"http://localhost"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"VITE_APP_GOOGLE_CLIENT_ID"})}),(0,s.jsx)(n.td,{children:"Google OAuth client ID for authentication."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"212676895890-3ad1thuq1kmenn32noc0kut7rl9lelk9.apps.googleusercontent.com"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"CACHE_DB_HOST"})}),(0,s.jsx)(n.td,{children:"Hostname for the Redis cache used by Celery."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"river-redis"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"BASE_API_HOST"})}),(0,s.jsx)(n.td,{children:"Hostname for the backend API server."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"river-backend"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"POSTGRES_DATABASE"})}),(0,s.jsx)(n.td,{children:"Name of the PostgreSQL database."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"river"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"POSTGRES_USER"})}),(0,s.jsx)(n.td,{children:"PostgreSQL database username."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"river"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"POSTGRES_PORT"})}),(0,s.jsx)(n.td,{children:"PostgreSQL database port."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"5432"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"POSTGRES_PASSWORD"})}),(0,s.jsx)(n.td,{children:"PostgreSQL database password."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"password"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"POSTGRES_HOST"})}),(0,s.jsx)(n.td,{children:"Hostname for the PostgreSQL database server."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"river-db"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"APP_ENV"})}),(0,s.jsxs)(n.td,{children:["Application environment (e.g., ",(0,s.jsx)(n.code,{children:"prod"}),", ",(0,s.jsx)(n.code,{children:"dev"}),")."]}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"prod"})})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"deployment",children:"Deployment"}),"\n",(0,s.jsxs)(n.p,{children:["It is configured using ",(0,s.jsx)(n.code,{children:"Makefile"})," and ",(0,s.jsx)(n.code,{children:"docker-compose"})," with ",(0,s.jsx)(n.code,{children:"container"})," stacks, you simply run it. It is automatically configured with SSL via ",(0,s.jsx)(n.code,{children:"Traefik"}),".\nIt will automatically point to your ",(0,s.jsx)(n.code,{children:"https://<your domain>"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"make production\n"})}),"\n",(0,s.jsxs)(n.p,{children:["For testing or using locally, please use below where you can access it locally only via ",(0,s.jsx)(n.code,{children:"http://localhost"})," or local network with the host machine local ip"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"make staging\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Staging",src:r(17503).A+"",width:"2560",height:"1413"})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},17503(e,n,r){r.d(n,{A:()=>t});const t=r.p+"assets/images/staging-818f014a896af09a8e6aa7dd188bc51a.png"},28453(e,n,r){r.d(n,{R:()=>d,x:()=>i});var t=r(96540);const s={},o=t.createContext(s);function d(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);