"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[586],{5175:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"river/river-utils-a-command-line-tool-for-engineer","title":"River-utils","description":"river-utils is a versatile Command-Line Interface (CLI) tool designed to streamline bioinformatics workflows, HPC job management, and cloud storage setup. This tool provides commands to manage cloud configurations, job scripts, and setup utilities.","source":"@site/docs/4.river/2.river-utils-a-command-line-tool-for-engineer.md","sourceDirName":"4.river","slug":"/river/river-utils-a-command-line-tool-for-engineer","permalink":"/river-docs/docs/river/river-utils-a-command-line-tool-for-engineer","draft":false,"unlisted":false,"editUrl":"https://github.com/riverxdata/docs/4.river/2.river-utils-a-command-line-tool-for-engineer.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Overview","permalink":"/river-docs/docs/river/challenge-to-setup-developing-environment-for-engineers"},"next":{"title":"Overview","permalink":"/river-docs/docs/hands-on-project/River-core/smartsensor/overview"}}');var r=s(4848),o=s(8453);const t={},l="River-utils",a={},c=[{value:"Installation",id:"installation",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Development Version",id:"development-version",level:3},{value:"Latest Version",id:"latest-version",level:3},{value:"Usage",id:"usage",level:2},{value:"Overview",id:"overview",level:3},{value:"1. Storage",id:"1-storage",level:3},{value:"Subcommands:",id:"subcommands",level:4},{value:"2. Slurm job monitoring",id:"2-slurm-job-monitoring",level:3},{value:"Subcommands:",id:"subcommands-1",level:4},{value:"License",id:"license",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"river-utils",children:"River-utils"})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"river-utils"})," is a versatile Command-Line Interface (CLI) tool designed to streamline bioinformatics workflows, HPC job management, and cloud storage setup. This tool provides commands to manage cloud configurations, job scripts, and setup utilities."]})}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Python 3.8 or higher"}),"\n",(0,r.jsx)(n.li,{children:"AWS credentials configured locally (for cloud commands)"}),"\n",(0,r.jsx)(n.li,{children:"Required system utilities: wget, curl"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"development-version",children:"Development Version"}),"\n",(0,r.jsxs)(n.p,{children:["To install the development version, use the following commands for x64. For other CPU architectures, follow ",(0,r.jsx)(n.a,{href:"https://mamba.readthedocs.io/en/latest/installation/micromamba-installation.html",children:"these instructions"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Adjust the installation path for micromamba\ngit clone https://github.com/riverxdata/river-utils.git -b dev\ncd river-utils \nbash base.sh\nmake build\npip install -e .\n"})}),"\n",(0,r.jsx)(n.h3,{id:"latest-version",children:"Latest Version"}),"\n",(0,r.jsx)(n.p,{children:"To install the latest stable version, use the following command. Besides the Python package, it offers several useful software tools:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"aws"}),": The AWS client to interact with AWS services or AWS-compatible services"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"singularity"}),": A container engine suitable for root-less environments"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"r-base (4.4.0)"}),": The R environment for AWS-related tasks"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"python (3.9.21)"}),": The Python environment"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"zsh"}),": A shell with plugins to enhance performance when working with Unix"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note"}),": This will install micromamba, create an environment called ",(0,r.jsx)(n.code,{children:"river"}),", and install the above software without restricting versions."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'version="add_awscli_zsh"\nbash <(curl -Ls https://raw.githubusercontent.com/riverxdata/river-utils/${version}/install/setup.sh) $HOME $version\nsource ~/.river.sh\n'})}),"\n",(0,r.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(n.h3,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"river-utils"})," CLI consists of three main subcommands:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"cloud"}),": Manage AWS S3 configurations and mount buckets using ",(0,r.jsx)(n.strong,{children:"Goofys"}),". Note that the current AWS CLI does not support region."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"job"}),": Manage and generate job scripts for HPC systems and the River web server."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"setup"}),": Set up standard tools for bioinformatics analysis."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"1-storage",children:"1. Storage"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"cloud"})," command is used to configure and manage S3 buckets with Goofys."]}),"\n",(0,r.jsx)(n.h4,{id:"subcommands",children:"Subcommands:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"s3-config"}),": Add a new AWS profile to your local configuration."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cloud s3-config --profile-name PROFILE_NAME --region REGION --aws-access-key-id AWS_ACCESS_KEY_ID --aws-secret-access-key AWS_SECRET_ACCESS_KEY\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-slurm-job-monitoring",children:"2. Slurm job monitoring"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"job"})," command is used for managing HPC job scripts and information."]}),"\n",(0,r.jsx)(n.h4,{id:"subcommands-1",children:"Subcommands:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"create"}),": Generate a job script based on a provided Git repository and version."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"info"}),": Fetch and display information about jobs."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"job create --job-id JOB_ID\njob config --job-id JOB_ID\njob info JOB_UUIDS\n"})}),"\n",(0,r.jsxs)(n.p,{children:["To load micromamba and the river command line tool with these setups, run the following command or add it to your ",(0,r.jsx)(n.code,{children:".bashrc"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"source ~/.river.sh\n"})}),"\n",(0,r.jsx)(n.h3,{id:"license",children:"License"}),"\n",(0,r.jsx)(n.p,{children:"This project is licensed under the MIT License."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var i=s(6540);const r={},o=i.createContext(r);function t(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);