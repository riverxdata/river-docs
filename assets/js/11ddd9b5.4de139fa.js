"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[8619],{100(e,n,s){s.d(n,{A:()=>r});const r=s.p+"assets/images/sbatch_codeserver-cb7a6d4caf78a730f928ccdfa6ca94d6.png"},2521(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>c});var r=s(9252),i=s(4848),o=s(8453);const t={slug:"setup-local-nextflow-training",title:"Setting Up a Local Nextflow Training Environment with Code-Server and HPC",authors:["river"],tags:["nextflow","singularity","code-server","hpc","setup","training"],image:"./imgs/intro.png"},l=void 0,a={image:s(9831).A,authorsImageUrls:[void 0]},c=[{value:"1. Install Code-Server with Pixi",id:"1-install-code-server-with-pixi",level:2},{value:"1.1. What is Code-Server?",id:"11-what-is-code-server",level:3},{value:"1.2. Understanding Pixi",id:"12-understanding-pixi",level:3},{value:"1.3. Launch Code-Server as a SLURM Job",id:"13-launch-code-server-as-a-slurm-job",level:3},{value:"2. Access Code-Server from Local Machine via SSH Tunnel",id:"2-access-code-server-from-local-machine-via-ssh-tunnel",level:2},{value:"2.1. Find Your Code-Server Job Node",id:"21-find-your-code-server-job-node",level:3},{value:"2.2. Create SSH Tunnel from Your Local Machine",id:"22-create-ssh-tunnel-from-your-local-machine",level:3},{value:"2.3. Background Tunnel (Optional)",id:"23-background-tunnel-optional",level:3},{value:"2.4. SSH Config Convenience Setup",id:"24-ssh-config-convenience-setup",level:3},{value:"2.5. Access Code-Server",id:"25-access-code-server",level:3},{value:"3. Install Code-Server Extensions and Verify Tools",id:"3-install-code-server-extensions-and-verify-tools",level:2},{value:"3.1. Verify Tools Installation",id:"31-verify-tools-installation",level:3},{value:"3.2. Install Code-Server Extensions in Browser",id:"32-install-code-server-extensions-in-browser",level:3},{value:"3.3. Testing Your Settings",id:"33-testing-your-settings",level:3},{value:"4. Best Practices and Tips",id:"4-best-practices-and-tips",level:2},{value:"4.1. Persistent Code-Server Setup",id:"41-persistent-code-server-setup",level:3},{value:"4.2. Create a Submission Helper Script",id:"42-create-a-submission-helper-script",level:3},{value:"4.3. Security Considerations",id:"43-security-considerations",level:3},{value:"4.4. Resource Allocation",id:"44-resource-allocation",level:3},{value:"5. Recap and Key Takeaways",id:"5-recap-and-key-takeaways",level:2},{value:"What We&#39;ve Accomplished",id:"what-weve-accomplished",level:3},{value:"Key Takeaways",id:"key-takeaways",level:3},{value:"Quick Reference Workflow",id:"quick-reference-workflow",level:3},{value:"Next Steps",id:"next-steps",level:3},{value:"Troubleshooting Tips",id:"troubleshooting-tips",level:3}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Setting up a robust development environment for Nextflow training across local and HPC systems requires a unified solution. Code-server provides a browser-based VS Code interface accessible from any machine, making it perfect for teams collaborating on Nextflow workflows. This guide walks you through configuring a complete Nextflow training environment with code-server, Singularity containers, and Pixi-managed tools."}),"\n",(0,i.jsxs)(n.p,{children:["For a comprehensive introduction to Pixi and package management, see our ",(0,i.jsx)(n.a,{href:"/blog/pixi-is-new-conda-based-era",children:"Pixi new-conda era"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"1-install-code-server-with-pixi",children:"1. Install Code-Server with Pixi"}),"\n",(0,i.jsx)(n.p,{children:"Code-server brings VS Code to your browser, allowing seamless development on HPC systems without local installation. We'll install it using Pixi for clean dependency management."}),"\n",(0,i.jsx)(n.h3,{id:"11-what-is-code-server",children:"1.1. What is Code-Server?"}),"\n",(0,i.jsx)(n.p,{children:"Code-server runs VS Code in your browser, giving you the familiar IDE interface while working on remote systems. This is ideal for:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"HPC cluster environments"}),"\n",(0,i.jsx)(n.li,{children:"Shared computing resources"}),"\n",(0,i.jsx)(n.li,{children:"Working from multiple machines"}),"\n",(0,i.jsx)(n.li,{children:"Team collaboration on training projects"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"12-understanding-pixi",children:"1.2. Understanding Pixi"}),"\n",(0,i.jsxs)(n.p,{children:["Pixi is a powerful package manager that simplifies installation of tools like Nextflow and Singularity. For detailed information on Pixi setup and usage, refer to our comprehensive ",(0,i.jsx)(n.a,{href:"/blog/pixi-is-new-conda-based-era",children:"Pixi- New conda era"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"In this guide, we'll use Pixi to manage code-server, Nextflow, Singularity, and nf-core tools directly within a SLURM job."}),"\n",(0,i.jsx)(n.h3,{id:"13-launch-code-server-as-a-slurm-job",children:"1.3. Launch Code-Server as a SLURM Job"}),"\n",(0,i.jsx)(n.p,{children:"Submit code-server as a SLURM batch job. This ensures proper resource allocation and allows the job to run persistently on a compute node."}),"\n",(0,i.jsx)(n.p,{children:"Create a SLURM job script that installs and starts code-server:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Create sbatch script\ncat > ~/code-server-job.sh << \'EOF\'\n#!/bin/bash\n#SBATCH --job-name=code-server\n#SBATCH --time=24:00:00\n#SBATCH --cpus-per-task=2\n#SBATCH --mem=4GB\n#SBATCH --output=%x-%j.log\n\n# Install Pixi (one time per node)\ncurl -fsSL https://pixi.sh/install.sh | bash\nexport PATH="$HOME/.pixi/bin:$PATH"\n\n# Install code-server and all tools using Pixi\npixi global install code-server open-jdk nextflow singularity nf-core nf-test\n\n# Create code-server configuration directory\nmkdir -p ~/.config/code-server\n\n# Create configuration file\ncat > ~/.config/code-server/config.yaml << \'CONFIGEOF\'\nbind-addr: 127.0.0.1:8080\nauth: password\npassword: your-secure-password\ncert: false\nCONFIGEOF\n\n# Start code-server\necho "Starting code-server on $HOSTNAME:8080"\necho "Job ID: $SLURM_JOB_ID"\necho "Node: $SLURM_NODENAME"\n\ncode-server --bind-addr 0.0.0.0:8080\nEOF\n\n# Make script executable\nchmod +x ~/code-server-job.sh\n\n# Submit the job\nsbatch ~/code-server-job.sh\n'})}),"\n",(0,i.jsx)(n.p,{children:"Check the job status and find which node it's running on:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check running jobs\nsqueue -u $USER\n\n# You should see output like:\n# JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)\n# 12345       gpu code-serv    user  R       0:15      1 compute-node-05\n\n# Check the log file for connection details\ncat code-server-12345.log\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"job_log",src:s(100).A+"",width:"1831",height:"680"})}),"\n",(0,i.jsx)(n.h2,{id:"2-access-code-server-from-local-machine-via-ssh-tunnel",children:"2. Access Code-Server from Local Machine via SSH Tunnel"}),"\n",(0,i.jsx)(n.p,{children:"Code-server is now running on a compute node through your SLURM job. You need to create an SSH tunnel from your local machine through the login node to reach the compute node running code-server."}),"\n",(0,i.jsx)(n.h3,{id:"21-find-your-code-server-job-node",children:"2.1. Find Your Code-Server Job Node"}),"\n",(0,i.jsx)(n.p,{children:"First, identify which compute node your code-server job is running on:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# SSH into HPC login node\nssh user@hpc.server.edu\n\n# Check your running jobs\nsqueue -u $USER\n\n# Output example:\n# JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)\n# 12345      multi code-serv    user  R       5:30      1 worker-01\n\n# Note the node name (worker-01 in this example)\n\n# Verify code-server is running\nssh worker-01 'curl http://localhost:8080' 2>/dev/null | head -5\n"})}),"\n",(0,i.jsx)(n.h3,{id:"22-create-ssh-tunnel-from-your-local-machine",children:"2.2. Create SSH Tunnel from Your Local Machine"}),"\n",(0,i.jsx)(n.p,{children:"Now set up port forwarding from your local machine through the login node to the compute node running code-server:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Replace worker-01 with your actual node name\n# This creates a tunnel: local:8080 \u2192 login node \u2192 worker-01:8080\nssh -L 8080:worker-01:8080 user@hpc.server.edu\n\n# Keep this terminal open while using code-server\n# Open browser and navigate to: http://localhost:8080\n# Enter password: your-secure-password (from sbatch script)\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Important:"})," The tunnel command format is:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ssh -L local_port:compute_node:remote_port user@login_node\n"})}),"\n",(0,i.jsx)(n.p,{children:"Where:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"local_port"}),": Port on your local machine (8080)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"compute_node"}),": The node name from ",(0,i.jsx)(n.code,{children:"squeue"})," (e.g., worker-01)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"remote_port"}),": Port code-server listens on (8080)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"login_node"}),": Your HPC login node (hpc.server.edu)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"23-background-tunnel-optional",children:"2.3. Background Tunnel (Optional)"}),"\n",(0,i.jsx)(n.p,{children:"For a persistent tunnel that doesn't require keeping a terminal open:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Run tunnel in background\nssh -L 8080:worker-01:8080 user@hpc.server.edu -N -f\n\n# To close the tunnel later\nkillall ssh\n"})}),"\n",(0,i.jsx)(n.h3,{id:"24-ssh-config-convenience-setup",children:"2.4. SSH Config Convenience Setup"}),"\n",(0,i.jsxs)(n.p,{children:["For easier repeated access, add your HPC to ",(0,i.jsx)(n.code,{children:"~/.ssh/config"})," on your local machine:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Host hpc-dev\n    HostName hpc.server.edu\n    User your_username\n    LocalForward 8080 localhost:8080\n    ServerAliveInterval 60\n    ServerAliveCountMax 3\n"})}),"\n",(0,i.jsx)(n.p,{children:"Then connect with:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ssh hpc-dev\n# Port 8080 is now forwarded to your HPC's code-server\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," This SSH config method forwards to ",(0,i.jsx)(n.code,{children:"localhost:8080"})," on the login node. For the SLURM compute node setup, use the direct command instead with the compute node hostname."]}),"\n",(0,i.jsx)(n.h3,{id:"25-access-code-server",children:"2.5. Access Code-Server"}),"\n",(0,i.jsx)(n.p,{children:"With the tunnel active, open your browser and navigate to:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"http://localhost:8080\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Enter your password (from code-server config) and verify it's working. You should see the VS Code welcome screen.\n",(0,i.jsx)(n.img,{alt:"password",src:s(7997).A+"",width:"2560",height:"1482"})]}),"\n",(0,i.jsx)(n.h2,{id:"3-install-code-server-extensions-and-verify-tools",children:"3. Install Code-Server Extensions and Verify Tools"}),"\n",(0,i.jsx)(n.p,{children:"Now that code-server is accessible from your local machine via the tunnel, install the necessary extensions and verify the pre-installed tools."}),"\n",(0,i.jsx)(n.h3,{id:"31-verify-tools-installation",children:"3.1. Verify Tools Installation"}),"\n",(0,i.jsx)(n.p,{children:"First, verify that all tools were successfully installed in the code-server job:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# In the code-server terminal (access via http://localhost:8080)\n# Check installed tools\n\nnextflow -v\nsingularity --version\nnf-core --version\nnf-test --version\n"})}),"\n",(0,i.jsx)(n.p,{children:"If any tools are missing, you can install them directly in the terminal:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Install any missing tools\npixi global install nextflow singularity nf-core nf-test\n"})}),"\n",(0,i.jsx)(n.h3,{id:"32-install-code-server-extensions-in-browser",children:"3.2. Install Code-Server Extensions in Browser"}),"\n",(0,i.jsx)(n.p,{children:"Now install VS Code extensions directly in code-server to enhance your development experience:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Open the Extensions marketplace (Ctrl+Shift+X or Cmd+Shift+X) or the left side bar for extensions, search for ",(0,i.jsx)(n.strong,{children:"nf-core-entensionpack"})," where it is the collection of extensions that you need to have better experiences with nextflow develoment process.\n",(0,i.jsx)(n.img,{alt:"search_ext",src:s(9915).A+"",width:"2560",height:"1482"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Check install:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"nf-core-entensionpack"})," : All of needed extensions for nextflow trainning\n",(0,i.jsx)(n.img,{alt:"installed_ext",src:s(4364).A+"",width:"2560",height:"1482"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"33-testing-your-settings",children:"3.3. Testing Your Settings"}),"\n",(0,i.jsx)(n.p,{children:"With tools and extensions installed, test your setup:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# In the code-server terminal, run a simple test\nnextflow run hello-world.nf\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"testing",src:s(6916).A+"",width:"2560",height:"1482"})}),"\n",(0,i.jsx)(n.h2,{id:"4-best-practices-and-tips",children:"4. Best Practices and Tips"}),"\n",(0,i.jsx)(n.p,{children:"For regular training sessions, streamline your workflow with these helpful scripts and practices."}),"\n",(0,i.jsx)(n.h3,{id:"41-persistent-code-server-setup",children:"4.1. Persistent Code-Server Setup"}),"\n",(0,i.jsx)(n.p,{children:"For regular training, create an alias or script to streamline job submission:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Add to ~/.bashrc\nalias submit-code-server='sbatch ~/code-server-job.sh && sleep 5 && squeue -u $USER | grep code-server'\n\n# Now you can easily submit with:\nsubmit-code-server\n"})}),"\n",(0,i.jsx)(n.h3,{id:"42-create-a-submission-helper-script",children:"4.2. Create a Submission Helper Script"}),"\n",(0,i.jsx)(n.p,{children:"Create a script that automatically sets up the tunnel:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Save as ~/tunnel-to-code-server.sh on your LOCAL machine\n#!/bin/bash\n\n# SSH to HPC and check code-server job\nNODE=$(ssh user@hpc.server.edu "squeue -u \\$USER --format=%N --noheader | grep compute" | head -1)\n\nif [ -z "$NODE" ]; then\n    echo "No compute node found. Submit code-server job first!"\n    exit 1\nfi\n\necho "Found code-server on node: $NODE"\necho "Creating tunnel to http://localhost:8080"\necho "Press Ctrl+C to close tunnel"\n\nssh -L 8080:$NODE:8080 user@hpc.server.edu\n'})}),"\n",(0,i.jsx)(n.p,{children:"Make it executable and use it:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"chmod +x ~/tunnel-to-code-server.sh\n~/tunnel-to-code-server.sh\n"})}),"\n",(0,i.jsx)(n.h3,{id:"43-security-considerations",children:"4.3. Security Considerations"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Always use a strong, unique password in ",(0,i.jsx)(n.code,{children:"config.yaml"})]}),"\n",(0,i.jsx)(n.li,{children:"Only forward port 8080 over SSH (never expose to the internet)"}),"\n",(0,i.jsx)(n.li,{children:"Rotate passwords regularly for training accounts"}),"\n",(0,i.jsx)(n.li,{children:"Consider setting SLURM job time limits appropriately (24 hours in the example)"}),"\n",(0,i.jsx)(n.li,{children:"Cancel unused code-server jobs to free resources"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"44-resource-allocation",children:"4.4. Resource Allocation"}),"\n",(0,i.jsx)(n.p,{children:"The example SLURM script allocates:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"2 CPUs"}),": Sufficient for code-server and light development"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"4GB RAM"}),": Comfortable for code-server and terminal work"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"24 hours"}),": Full day of work"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Adjust these for your needs:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# For heavier computation (running larger workflows)\n#SBATCH --cpus-per-task=4\n#SBATCH --mem=8GB\n\n# For shorter sessions (testing)\n#SBATCH --time=4:00:00\n\n# To use GPU (if available)\n#SBATCH --gres=gpu:1\n"})}),"\n",(0,i.jsx)(n.h2,{id:"5-recap-and-key-takeaways",children:"5. Recap and Key Takeaways"}),"\n",(0,i.jsx)(n.h3,{id:"what-weve-accomplished",children:"What We've Accomplished"}),"\n",(0,i.jsx)(n.p,{children:"You now have a complete, production-ready Nextflow training environment with:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Infrastructure:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Code-server running as a persistent SLURM job on HPC compute nodes"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 SSH tunneling for secure remote access from your local machine"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Browser-based VS Code interface accessible anywhere"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Tools & Frameworks:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Nextflow workflow engine with SLURM integration"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Singularity for HPC-compatible containerized workflows"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 nf-core pipeline framework for professional pipeline development"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 nf-test for pipeline validation and testing"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Configuration:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Pre-configured Nextflow with Singularity support"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 SLURM execution profiles for scalable job submission"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Security-hardened code-server with password authentication"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Single sbatch Script Deployment"}),": All tools (Pixi, code-server, Nextflow, Singularity, nf-core, nf-test) are installed in one SLURM job, eliminating complex setup procedures"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"SSH Tunnel Access"}),": Multi-hop SSH tunneling (",(0,i.jsx)(n.code,{children:"local \u2192 login node \u2192 compute node"}),") provides secure access to code-server from your local machine without exposing the HPC system"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Persistent Development Environment"}),": Code-server runs as a managed SLURM job, providing persistent access that survives network disconnections"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Browser-Based IDE"}),": VS Code in the browser works on any device (laptop, tablet, etc.) with no local installation required"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"SLURM Integration"}),": Nextflow is configured to submit individual workflow tasks to SLURM, enabling scalable pipeline execution across HPC resources"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Production-Ready Training"}),": The setup is suitable for team training, reproducible research, and production Nextflow workflows"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"quick-reference-workflow",children:"Quick Reference Workflow"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Step 1: Submit code-server job (one time)\nsbatch ~/code-server-job.sh\n\n# Step 2: Find compute node\nsqueue -u $USER\n\n# Step 3: Create SSH tunnel (from local machine)\nssh -L 8080:worker-01:8080 user@hpc.server.edu\n\n# Step 4: Access in browser\nhttp://localhost:8080\n\n# Step 5: Run workflows\nnextflow run main.nf -profile singularity\n"})}),"\n",(0,i.jsx)(n.h3,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Customize the sbatch script"})," for your HPC environment (queue names, account info, etc.)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Test the setup"})," with a simple ",(0,i.jsx)(n.code,{children:"nf-core"})," workflow"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Create training pipelines"})," using ",(0,i.jsx)(n.code,{children:"nf-core create"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Invite trainees"})," to use the same environment"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Monitor resources"})," using SLURM commands (",(0,i.jsx)(n.code,{children:"squeue"}),", ",(0,i.jsx)(n.code,{children:"sacct"}),", ",(0,i.jsx)(n.code,{children:"sinfo"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"troubleshooting-tips",children:"Troubleshooting Tips"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["If code-server won't start, check the log file: ",(0,i.jsx)(n.code,{children:"cat code-server-*.log"})]}),"\n",(0,i.jsxs)(n.li,{children:["If SSH tunnel fails, verify the compute node is accessible: ",(0,i.jsx)(n.code,{children:"ssh user@hpc.server.edu ssh worker-01 hostname"})]}),"\n",(0,i.jsxs)(n.li,{children:["If tools are missing, reinstall via: ",(0,i.jsx)(n.code,{children:"pixi global install nextflow singularity nf-core nf-test"})]}),"\n",(0,i.jsx)(n.li,{children:"For persistent tunnel, use the helper script provided in section 4.2"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},4364(e,n,s){s.d(n,{A:()=>r});const r=s.p+"assets/images/installed_extension_pack-175401aae0c3fd44b5b4ca4f18fdae5f.png"},6916(e,n,s){s.d(n,{A:()=>r});const r=s.p+"assets/images/test_codeserver_hello_world_nf-6a563a567c5fed16517a36a293a811f0.png"},7997(e,n,s){s.d(n,{A:()=>r});const r=s.p+"assets/images/code_server_password-2369498481b1a5520f7b9787a824a27b.png"},8453(e,n,s){s.d(n,{R:()=>t,x:()=>l});var r=s(6540);const i={},o=r.createContext(i);function t(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(o.Provider,{value:n},e.children)}},9252(e){e.exports=JSON.parse('{"permalink":"/river-docs/blog/setup-local-nextflow-training","source":"@site/blog/2026-02/2026-02-15-setup-local-nextflow-training.md","title":"Setting Up a Local Nextflow Training Environment with Code-Server and HPC","description":"Setting up a robust development environment for Nextflow training across local and HPC systems requires a unified solution. Code-server provides a browser-based VS Code interface accessible from any machine, making it perfect for teams collaborating on Nextflow workflows. This guide walks you through configuring a complete Nextflow training environment with code-server, Singularity containers, and Pixi-managed tools.","date":"2026-02-15T00:00:00.000Z","tags":[{"inline":true,"label":"nextflow","permalink":"/river-docs/blog/tags/nextflow"},{"inline":true,"label":"singularity","permalink":"/river-docs/blog/tags/singularity"},{"inline":true,"label":"code-server","permalink":"/river-docs/blog/tags/code-server"},{"inline":true,"label":"hpc","permalink":"/river-docs/blog/tags/hpc"},{"inline":true,"label":"setup","permalink":"/river-docs/blog/tags/setup"},{"inline":true,"label":"training","permalink":"/river-docs/blog/tags/training"}],"readingTime":8.88,"hasTruncateMarker":true,"authors":[{"name":"Thanh-Giang Tan Nguyen","title":"Founder at RIVER","url":"https://www.facebook.com/nttg8100","page":{"permalink":"/river-docs/blog/authors/river"},"email":"nttg8100@gmail.com","socials":{"linkedin":"https://www.linkedin.com/in/thanh-giang-tan-nguyen-761b28190/","github":"https://github.com/nttg8100"},"imageURL":"https://avatars.githubusercontent.com/u/64969412?v=4","key":"river"}],"frontMatter":{"slug":"setup-local-nextflow-training","title":"Setting Up a Local Nextflow Training Environment with Code-Server and HPC","authors":["river"],"tags":["nextflow","singularity","code-server","hpc","setup","training"],"image":"./imgs/intro.png"},"unlisted":false,"nextItem":{"title":"Docker Out of Docker: Running Interactive Web Applications for Data Analysis","permalink":"/river-docs/blog/docker-out-docker-bioinformatics-web-apps"}}')},9831(e,n,s){s.d(n,{A:()=>r});const r=s.p+"assets/images/intro-7aaa912f8e48c1bb524eacaf56d8a3cd.png"},9915(e,n,s){s.d(n,{A:()=>r});const r=s.p+"assets/images/extensions_search-a79db90c6ba523ea51e79741b24feb9e.png"}}]);