<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Unix Pipes in Bioinformatics: How Streaming Data Reduces Memory and Storage | RiverXData</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://riverxdata.github.io/river-docs/blog/unix-pipes-bioinformatics-streaming-data"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="keywords" content="bioinformatics, data, infrastructure, hpc, cloud"><meta data-rh="true" name="author" content="RiverXData Team"><meta data-rh="true" property="og:title" content="Unix Pipes in Bioinformatics: How Streaming Data Reduces Memory and Storage | RiverXData"><meta data-rh="true" name="description" content="Unix pipes (|) are one of the most powerful yet underutilized features in bioinformatics. They allow you to chain multiple commands together, processing data in a streaming fashion that dramatically reduces memory usage and disk I/O. This post explores why pipes are essential for bioinformatics work and shows how they work under the hood."><meta data-rh="true" property="og:description" content="Unix pipes (|) are one of the most powerful yet underutilized features in bioinformatics. They allow you to chain multiple commands together, processing data in a streaming fashion that dramatically reduces memory usage and disk I/O. This post explores why pipes are essential for bioinformatics work and shows how they work under the hood."><meta data-rh="true" property="og:image" content="https://riverxdata.github.io/river-docs/assets/images/intro-7aaa912f8e48c1bb524eacaf56d8a3cd.png"><meta data-rh="true" name="twitter:image" content="https://riverxdata.github.io/river-docs/assets/images/intro-7aaa912f8e48c1bb524eacaf56d8a3cd.png"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2026-02-10T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://www.facebook.com/nttg8100"><meta data-rh="true" property="article:tag" content="unix,pipes,bioinformatics,streaming,data-processing,performance"><link data-rh="true" rel="icon" href="/river-docs/img/logo-riverxdata-02.png"><link data-rh="true" rel="canonical" href="https://riverxdata.github.io/river-docs/blog/unix-pipes-bioinformatics-streaming-data"><link data-rh="true" rel="alternate" href="https://riverxdata.github.io/river-docs/blog/unix-pipes-bioinformatics-streaming-data" hreflang="en"><link data-rh="true" rel="alternate" href="https://riverxdata.github.io/river-docs/blog/unix-pipes-bioinformatics-streaming-data" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://riverxdata.github.io/river-docs/blog/unix-pipes-bioinformatics-streaming-data","mainEntityOfPage":"https://riverxdata.github.io/river-docs/blog/unix-pipes-bioinformatics-streaming-data","url":"https://riverxdata.github.io/river-docs/blog/unix-pipes-bioinformatics-streaming-data","headline":"Unix Pipes in Bioinformatics: How Streaming Data Reduces Memory and Storage","name":"Unix Pipes in Bioinformatics: How Streaming Data Reduces Memory and Storage","description":"Unix pipes (|) are one of the most powerful yet underutilized features in bioinformatics. They allow you to chain multiple commands together, processing data in a streaming fashion that dramatically reduces memory usage and disk I/O. This post explores why pipes are essential for bioinformatics work and shows how they work under the hood.","datePublished":"2026-02-10T00:00:00.000Z","author":{"@type":"Person","name":"Thanh-Giang Tan Nguyen","description":"Founder at RIVER","url":"https://www.facebook.com/nttg8100","email":"nttg8100@gmail.com","image":"https://avatars.githubusercontent.com/u/64969412?v=4"},"image":{"@type":"ImageObject","@id":"https://riverxdata.github.io/river-docs/assets/images/intro-7aaa912f8e48c1bb524eacaf56d8a3cd.png","url":"https://riverxdata.github.io/river-docs/assets/images/intro-7aaa912f8e48c1bb524eacaf56d8a3cd.png","contentUrl":"https://riverxdata.github.io/river-docs/assets/images/intro-7aaa912f8e48c1bb524eacaf56d8a3cd.png","caption":"title image for the blog post: Unix Pipes in Bioinformatics: How Streaming Data Reduces Memory and Storage"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://riverxdata.github.io/river-docs/blog","name":"RiverXData Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/river-docs/blog/rss.xml" title="RiverXData RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/river-docs/blog/atom.xml" title="RiverXData Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0BBYTVWQV2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-0BBYTVWQV2",{anonymize_ip:!0})</script>




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/river-docs/assets/css/styles.486b8637.css">
<script src="/river-docs/assets/js/runtime~main.23bea105.js" defer="defer"></script>
<script src="/river-docs/assets/js/main.e1458d05.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><link rel="preload" as="image" href="/river-docs/img/logo-riverxdata-02.png"><link rel="preload" as="image" href="https://avatars.githubusercontent.com/u/64969412?v=4"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style="background-color:#667eea;color:#ffffff" role="banner"><div class="content_knG7 announcementBarContent_xLdY">Comming soon: Support us on GitHub Sponsors! ❤️</div></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/river-docs/"><div class="navbar__logo"><img src="/river-docs/img/logo-riverxdata-02.png" alt="RiverXData" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/river-docs/img/logo-riverxdata-02.png" alt="RiverXData" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/river-docs/docs/overview">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/river-docs/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/riverxdata/river" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="paper" style="width:90%;margin:auto;margin-top:50px"><div class="row" style="width:100%"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2026</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/river-docs/blog/migrate-bash-nextflow-enterprise-pipeline">How to Migrate from In-House Pipelines to Enterprise-Level Workflows: A Proven 3-Step Validation Framework</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/river-docs/blog/unix-pipes-bioinformatics-streaming-data">Unix Pipes in Bioinformatics: How Streaming Data Reduces Memory and Storage</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/river-docs/blog/bioinformatics-containers-build-efficient-docker">Containers in Bioinformatics: Community Tooling and Efficient Docker Building</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/river-docs/blog/bioinformatics-containers-build-efficient-docker">Containers in Bioinformatics: Community Tooling and Efficient Docker Building</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/river-docs/blog/bioinformatics-workflow-template-ci-cd-best-practices">Bioinformatics Workflow Template: Standardizing Python Pipelines with Modular Design</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/river-docs/blog/cicd-bioinformatics-act-local-github-action">Running GitHub Actions Locally with act: 5x Faster Development</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/river-docs/blog/machine-learning-bioinformatics-part1-knn">Machine Learning in Bioinformatics Part 1: Building KNN from Scratch</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/river-docs/blog/intro-ai-ml-bioinformatics-applications">Introduction to AI/ML in Bioinformatics: Classification Models &amp; Evaluation</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/river-docs/blog/bioinformatics-computing-resource-optimization-part2">Bioinformatics Cost Optimization For Input Using Nextflow (Part 2)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/river-docs/blog/bioinformatics-computing-resource-optimization-part1">Bioinformatics Cost Optimization for Computing Resources Using Nextflow (Part 1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/river-docs/blog/pixi-is-new-conda-based-era">Pixi- New conda era</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/river-docs/blog/how-to-version-control-git-bioinformatics-part-2">The Evolution of Version Control - CI/CD in bioinformatics (Part 2)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/river-docs/blog/how-to-version-control-git-bioinformatics-part-1">The Evolution of Version Control - Git&#x27;s Role in Reproducible Bioinformatics (Part 1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/river-docs/blog/how-to-build-slurm-hpc-part-3">Building a Slurm HPC Cluster (Part 3) - Administration and Best Practices</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/river-docs/blog/how-to-build-slurm-hpc-part-2">Building a Slurm HPC Cluster (Part 2) - Scaling to Production with Ansible</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/river-docs/blog/how-to-build-slurm-hpc-part-1">Building a Slurm HPC Cluster (Part 1) - Single Node Setup and Fundamentals</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/river-docs/blog/river-platform-and-nextflow">RIVER- A Web Application to Run Nf-Core</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_f1Hy">Unix Pipes in Bioinformatics: How Streaming Data Reduces Memory and Storage</h1><div class="container_mt6G margin-vert--md"><time datetime="2026-02-10T00:00:00.000Z">February 10, 2026</time> · <!-- -->22 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/river-docs/blog/authors/river"><img class="avatar__photo authorImage_XqGP" src="https://avatars.githubusercontent.com/u/64969412?v=4" alt="Thanh-Giang Tan Nguyen"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/river-docs/blog/authors/river"><span class="authorName_yefp" translate="no">Thanh-Giang Tan Nguyen</span></a></div><small class="authorTitle_nd0D" title="Founder at RIVER">Founder at RIVER</small><div class="authorSocials_rSDt"><a href="https://www.linkedin.com/in/thanh-giang-tan-nguyen-761b28190/" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid" viewBox="0 0 256 256" style="--dark:#0a66c2;--light:#ffffffe6" class="authorSocialIcon_XYv3 linkedinSvg_FCgI"><path d="M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009-.002-12.157 9.851-22.014 22.008-22.016 12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453"></path></svg></a><a href="https://github.com/nttg8100" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 250" preserveAspectRatio="xMidYMid" style="--dark:#000;--light:#fff" class="authorSocialIcon_XYv3 githubSvg_Uu4N"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p>Unix pipes (|) are one of the most powerful yet underutilized features in bioinformatics. They allow you to chain multiple commands together, processing data in a streaming fashion that dramatically reduces memory usage and disk I/O. This post explores why pipes are essential for bioinformatics work and shows how they work under the hood.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-problem-data-explosion-in-bioinformatics">The Problem: Data Explosion in Bioinformatics<a href="#the-problem-data-explosion-in-bioinformatics" class="hash-link" aria-label="Direct link to The Problem: Data Explosion in Bioinformatics" title="Direct link to The Problem: Data Explosion in Bioinformatics" translate="no">​</a></h2>
<p>Modern sequencing generates massive datasets. A single human genome sequencing run can produce:</p>
<ul>
<li class=""><strong>Raw reads:</strong> 100+ GB of FASTQ files</li>
<li class=""><strong>Alignments:</strong> 50-100 GB of BAM files</li>
<li class=""><strong>Variants:</strong> 1-5 GB of VCF files</li>
</ul>
<p>Without pipes, traditional bioinformatics workflows create intermediate files at each step:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Traditional approach (❌ Wasteful)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">bwa mem reference.fa reads.fastq </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> aligned.sam    </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># 200 GB intermediate</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">samtools view </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-b</span><span class="token plain"> aligned.sam </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> aligned.bam        </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># 100 GB intermediate</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">samtools </span><span class="token function" style="color:hsl(221, 87%, 60%)">sort</span><span class="token plain"> aligned.bam </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> sorted.bam            </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># 100 GB intermediate</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">samtools index sorted.bam                         </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Already indexed</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Total disk usage: 400 GB for processing 100 GB of raw data!</span><br></span></code></pre></div></div>
<p><strong>The costs:</strong></p>
<ul>
<li class=""><strong>Storage:</strong> 4x the original data size just for intermediates</li>
<li class=""><strong>Time:</strong> Writing/reading intermediate files is slow</li>
<li class=""><strong>Failure:</strong> If a step fails midway, you lose everything and restart from scratch</li>
<li class=""><strong>Complexity:</strong> Managing and cleaning up intermediate files is tedious</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-solution-unix-pipes-for-streaming-data">The Solution: Unix Pipes for Streaming Data<a href="#the-solution-unix-pipes-for-streaming-data" class="hash-link" aria-label="Direct link to The Solution: Unix Pipes for Streaming Data" title="Direct link to The Solution: Unix Pipes for Streaming Data" translate="no">​</a></h2>
<p>Pipes (<code>|</code>) connect the output of one command directly to the input of the next, processing data in memory as it flows through:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Pipe approach (✓ Efficient)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">bwa mem reference.fa reads.fastq </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  samtools view </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-b</span><span class="token plain"> - </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  samtools </span><span class="token function" style="color:hsl(221, 87%, 60%)">sort</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-o</span><span class="token plain"> sorted.bam -</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">samtools index sorted.bam</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Total disk usage: 100 GB (original data + final output)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># No intermediate files!</span><br></span></code></pre></div></div>
<p><strong>The benefits:</strong></p>
<ul>
<li class=""><strong>Memory efficient:</strong> Data flows through without full copies in RAM</li>
<li class=""><strong>Fast:</strong> No disk I/O for intermediates</li>
<li class=""><strong>Resilient:</strong> Failures are caught immediately and clearly</li>
<li class=""><strong>Simple:</strong> Clean, readable pipeline syntax</li>
<li class=""><strong>Storage efficient:</strong> Only keep final outputs</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-pipes-work-under-the-hood">How Pipes Work Under the Hood<a href="#how-pipes-work-under-the-hood" class="hash-link" aria-label="Direct link to How Pipes Work Under the Hood" title="Direct link to How Pipes Work Under the Hood" translate="no">​</a></h2>
<p>Understanding how pipes work is key to writing efficient bioinformatics pipelines. Let&#x27;s explore the mechanics.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-file-descriptors-in-unix">1. File Descriptors in Unix<a href="#1-file-descriptors-in-unix" class="hash-link" aria-label="Direct link to 1. File Descriptors in Unix" title="Direct link to 1. File Descriptors in Unix" translate="no">​</a></h3>
<p>Every Unix process has three standard file descriptors:</p>
<table><thead><tr><th>Descriptor</th><th>Name</th><th>Purpose</th><th>Default Target</th></tr></thead><tbody><tr><td>0</td><td>stdin</td><td>Standard input</td><td>Keyboard</td></tr><tr><td>1</td><td>stdout</td><td>Standard output</td><td>Terminal/Screen</td></tr><tr><td>2</td><td>stderr</td><td>Standard error</td><td>Terminal/Screen</td></tr></tbody></table>
<p>By default, processes read from stdin (file descriptor 0) and write to stdout (file descriptor 1).</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Example: cat command</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> myfile.txt    </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Reads file, writes to stdout (terminal)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain"> myfile.txt  </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Explicitly redirect stdin from file</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> myfile.txt </span><span class="token operator file-descriptor important" style="color:hsl(230, 8%, 24%);font-weight:bold">1</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> output.txt  </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Redirect stdout to file</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-creating-a-pipe-with-the-pipe-system-call">2. Creating a Pipe with the Pipe System Call<a href="#2-creating-a-pipe-with-the-pipe-system-call" class="hash-link" aria-label="Direct link to 2. Creating a Pipe with the Pipe System Call" title="Direct link to 2. Creating a Pipe with the Pipe System Call" translate="no">​</a></h3>
<p>When you type <code>command1 | command2</code>, the shell:</p>
<ol>
<li class=""><strong>Creates a pipe</strong> - an unnamed, in-memory buffer that connects two processes</li>
<li class=""><strong>Forks process 1</strong> - creates a copy of the shell running <code>command1</code></li>
<li class=""><strong>Connects stdout of process 1</strong> to the pipe&#x27;s write end (file descriptor 1)</li>
<li class=""><strong>Forks process 2</strong> - creates a copy of the shell running <code>command2</code></li>
<li class=""><strong>Connects stdin of process 2</strong> to the pipe&#x27;s read end (file descriptor 0)</li>
<li class=""><strong>Executes both processes</strong> - they run in parallel</li>
</ol>
<p><strong>Diagram of a pipe:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">[command1]                    [command2]</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     |                              |</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  stdout (fd 1)              stdin (fd 0)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     |                              |</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     v                              ^</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    [================================]</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">              Pipe (kernel buffer)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-the-kernel-manages-data-flow">3. The Kernel Manages Data Flow<a href="#3-the-kernel-manages-data-flow" class="hash-link" aria-label="Direct link to 3. The Kernel Manages Data Flow" title="Direct link to 3. The Kernel Manages Data Flow" translate="no">​</a></h3>
<p>The Unix kernel manages the pipe as a <strong>FIFO (First In, First Out) buffer</strong>:</p>
<ul>
<li class=""><strong>Write side:</strong> <code>command1</code> writes data to the pipe&#x27;s write end</li>
<li class=""><strong>Pipe buffer:</strong> Data sits in kernel memory (typically 64KB-1MB per pipe)</li>
<li class=""><strong>Read side:</strong> <code>command2</code> reads data from the pipe&#x27;s read end</li>
</ul>
<p><strong>Key behaviors:</strong></p>
<ol>
<li class=""><strong>If pipe is full:</strong> The writing process blocks until space is available</li>
<li class=""><strong>If pipe is empty:</strong> The reading process blocks until data arrives</li>
<li class=""><strong>If reader closes:</strong> Writer gets a SIGPIPE signal (broken pipe error)</li>
<li class=""><strong>If writer closes:</strong> Reader gets EOF and can finish processing</li>
</ol>
<p>This synchronization happens automatically—you don&#x27;t need to manage it.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-example-tracing-a-real-pipe">4. Example: Tracing a Real Pipe<a href="#4-example-tracing-a-real-pipe" class="hash-link" aria-label="Direct link to 4. Example: Tracing a Real Pipe" title="Direct link to 4. Example: Tracing a Real Pipe" translate="no">​</a></h3>
<p>Let&#x27;s trace what happens when you run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> genome.fasta </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">grep</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&quot;&gt;chr1&quot;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">wc</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-l</span><br></span></code></pre></div></div>
<p><strong>Step 1: Shell creates the pipeline</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">User types: cat genome.fasta | grep &quot;&gt;chr1&quot; | wc -l</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">         ↓</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Shell creates:</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  - Pipe A (between cat and grep)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  - Pipe B (between grep and wc)</span><br></span></code></pre></div></div>
<p><strong>Step 2: Processes fork and file descriptors redirect</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Process: cat genome.fasta</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  stdout (fd 1) → Pipe A write end</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Process: grep &quot;&gt;chr1&quot;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  stdin (fd 0)  ← Pipe A read end</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  stdout (fd 1) → Pipe B write end</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Process: wc -l</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  stdin (fd 0)  ← Pipe B read end</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  stdout (fd 1) → Terminal</span><br></span></code></pre></div></div>
<p><strong>Step 3: Execution flows</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Pipe A buffer:     Pipe B buffer:</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">[data from cat] → [data to grep] → [data to wc] → [count to terminal]</span><br></span></code></pre></div></div>
<p><strong>Step 4: Back pressure synchronization</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">If grep is slow:</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  - Pipe A fills up</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  - cat blocks (can&#x27;t write)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  - System automatically waits for grep to catch up</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">If wc is slow:</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  - Pipe B fills up</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  - grep blocks (can&#x27;t write)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  - System waits for wc to catch up</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="5-memory-efficiency-why-pipes-dont-load-everything-into-ram">5. Memory Efficiency: Why Pipes Don&#x27;t Load Everything into RAM<a href="#5-memory-efficiency-why-pipes-dont-load-everything-into-ram" class="hash-link" aria-label="Direct link to 5. Memory Efficiency: Why Pipes Don&#x27;t Load Everything into RAM" title="Direct link to 5. Memory Efficiency: Why Pipes Don&#x27;t Load Everything into RAM" translate="no">​</a></h3>
<p><strong>Without pipes (writing to disk):</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">command1: Read all data → Write 100GB to disk</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">          ↓</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">          Disk (100GB) ← Slow, uses storage</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">          ↓</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">command2: Read 100GB from disk → Process → Write results</span><br></span></code></pre></div></div>
<p><strong>With pipes (streaming):</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">command1: Read chunk → Write chunk to pipe buffer (64KB)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                      ↓</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                   Pipe buffer (kernel memory, reused)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                      ↓</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">command2: Read chunk → Process → Write chunk to next pipe</span><br></span></code></pre></div></div>
<p>Only a small amount of data (one buffer, ~64KB) sits in memory at any time. The buffer is <strong>reused</strong> as data flows through, so memory usage stays constant regardless of total data size.</p>
<p><strong>This is the magic of pipes:</strong> Constant memory usage, not linear in data size.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="practical-example-processing-a-large-fastq-file">Practical Example: Processing a Large FASTQ File<a href="#practical-example-processing-a-large-fastq-file" class="hash-link" aria-label="Direct link to Practical Example: Processing a Large FASTQ File" title="Direct link to Practical Example: Processing a Large FASTQ File" translate="no">​</a></h2>
<p>Let&#x27;s apply pipes to a real bioinformatics workflow.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="without-pipes-wasteful">Without Pipes (Wasteful)<a href="#without-pipes-wasteful" class="hash-link" aria-label="Direct link to Without Pipes (Wasteful)" title="Direct link to Without Pipes (Wasteful)" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Step 1: Filter low-quality reads</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">fastqc reads.fastq </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--outdir</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain">qc_before/</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">fastq_quality_filter </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-i</span><span class="token plain"> reads.fastq </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-o</span><span class="token plain"> reads_filtered.fastq </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-q</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">20</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-p</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># File created: reads_filtered.fastq (70 GB)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Step 2: Count remaining reads</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">wc</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-l</span><span class="token plain"> reads_filtered.fastq</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Temporary file: 70 GB on disk</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Step 3: Get sequence length distribution</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">awk</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;NR%4==2 {print length}&#x27;</span><span class="token plain"> reads_filtered.fastq </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">sort</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-n</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">uniq</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-c</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> length_dist.txt</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Processing reads_filtered.fastq again</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Cleanup</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">rm</span><span class="token plain"> reads_filtered.fastq</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Total I/O: Read source (100GB) + Write filtered (70GB) + Read filtered (70GB) = 240GB</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Total disk: 170 GB (100 source + 70 intermediate)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="with-pipes-efficient">With Pipes (Efficient)<a href="#with-pipes-efficient" class="hash-link" aria-label="Direct link to With Pipes (Efficient)" title="Direct link to With Pipes (Efficient)" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Single streaming pipeline: Filter → Count → Length distribution</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">fastq_quality_filter </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-i</span><span class="token plain"> reads.fastq </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-q</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">20</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-p</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">80</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">tee</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token function" style="color:hsl(221, 87%, 60%)">wc</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-l</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> read_count.txt</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">awk</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;NR%4==2 {print length}&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">sort</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-n</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">uniq</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-c</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> length_dist.txt</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Total I/O: Read source (100GB) = 100GB</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Total disk: 100 GB (source + final outputs only)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Memory: ~100MB (pipe buffers)</span><br></span></code></pre></div></div>
<p><strong>Comparison:</strong></p>
<table><thead><tr><th>Metric</th><th>Without Pipes</th><th>With Pipes</th></tr></thead><tbody><tr><td><strong>Total I/O</strong></td><td>240 GB</td><td>100 GB</td></tr><tr><td><strong>Disk space</strong></td><td>170 GB</td><td>100 GB</td></tr><tr><td><strong>Processing time</strong></td><td>Slow (multiple reads from disk)</td><td>Fast (one sequential read)</td></tr><tr><td><strong>Memory usage</strong></td><td>Streaming OK</td><td>Streaming OK</td></tr><tr><td><strong>Failure recovery</strong></td><td>Restart entire pipeline</td><td>Pipeline atomicity issues</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="advanced-pipe-patterns-in-bioinformatics">Advanced Pipe Patterns in Bioinformatics<a href="#advanced-pipe-patterns-in-bioinformatics" class="hash-link" aria-label="Direct link to Advanced Pipe Patterns in Bioinformatics" title="Direct link to Advanced Pipe Patterns in Bioinformatics" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-parallel-processing-with-gnu-parallel">1. Parallel Processing with GNU Parallel<a href="#1-parallel-processing-with-gnu-parallel" class="hash-link" aria-label="Direct link to 1. Parallel Processing with GNU Parallel" title="Direct link to 1. Parallel Processing with GNU Parallel" translate="no">​</a></h3>
<p>Process multiple files simultaneously while piping:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Process 1000 FASTQ files in parallel</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">find</span><span class="token plain"> </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">.</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-name</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&quot;*.fastq&quot;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  parallel </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--pipe</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--block</span><span class="token plain"> 10M </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;fastq_quality_filter -q 20 -p 80 | gzip&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> all_filtered.fastq.gz</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-tee-branching-a-pipeline">2. Tee: Branching a Pipeline<a href="#2-tee-branching-a-pipeline" class="hash-link" aria-label="Direct link to 2. Tee: Branching a Pipeline" title="Direct link to 2. Tee: Branching a Pipeline" translate="no">​</a></h3>
<p>Use <code>tee</code> to send data to multiple streams:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Simultaneously:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># 1. Count reads</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># 2. Filter and output</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># 3. Generate statistics</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">samtools view input.bam </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">tee</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">samtools flagstat /dev/stdin </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> flagstat.txt</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  samtools view </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-b</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-F</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">4</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  samtools </span><span class="token function" style="color:hsl(221, 87%, 60%)">sort</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-o</span><span class="token plain"> sorted_aligned.bam -</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># The &gt;(command) syntax is &quot;process substitution&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># It creates a named pipe to a subprocess</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-named-pipes-mkfifo-for-complex-workflows">3. Named Pipes (mkfifo) for Complex Workflows<a href="#3-named-pipes-mkfifo-for-complex-workflows" class="hash-link" aria-label="Direct link to 3. Named Pipes (mkfifo) for Complex Workflows" title="Direct link to 3. Named Pipes (mkfifo) for Complex Workflows" translate="no">​</a></h3>
<p>For workflows requiring multiple inputs/outputs:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Create named pipes</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">mkfifo</span><span class="token plain"> pipe1 pipe2</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Process A writes to pipe1, reads from pipe2</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> input.txt </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> pipe1 </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Process B reads from pipe1, writes to pipe2</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">sort</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain"> pipe1 </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> pipe2 </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Main process reads final result</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">uniq</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain"> pipe2</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Cleanup</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">rm</span><span class="token plain"> pipe1 pipe2</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-buffering-and-backpressure-management">4. Buffering and Backpressure Management<a href="#4-buffering-and-backpressure-management" class="hash-link" aria-label="Direct link to 4. Buffering and Backpressure Management" title="Direct link to 4. Buffering and Backpressure Management" translate="no">​</a></h3>
<p>Sometimes a slow downstream command creates a bottleneck. Use <code>buffer</code> to add extra memory:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Without buffer: cat blocks if samtools is slow</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> large.bam </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> samtools view </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-c</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># With buffer: Extra memory absorbs the blocking</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> large.bam </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> buffer </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-m</span><span class="token plain"> 500M </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> samtools view </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-c</span><br></span></code></pre></div></div>
<p><strong>When to use buffer:</strong></p>
<ul>
<li class="">Downstream process is much slower than upstream</li>
<li class="">You have spare RAM and want to minimize blocking</li>
<li class="">Upstream data is expensive to regenerate</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="5-process-substitution-for-multiple-outputs">5. Process Substitution for Multiple Outputs<a href="#5-process-substitution-for-multiple-outputs" class="hash-link" aria-label="Direct link to 5. Process Substitution for Multiple Outputs" title="Direct link to 5. Process Substitution for Multiple Outputs" translate="no">​</a></h3>
<p>Fan out to multiple processes from a single input:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Single BAM file → Multiple statistics simultaneously</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">samtools view input.bam </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">tee</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">samtools view </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-c</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> read_count.txt</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">      </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token function" style="color:hsl(221, 87%, 60%)">awk</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;{print $3}&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">sort</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">uniq</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-c</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> chromosome_dist.txt</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">      </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token function" style="color:hsl(221, 87%, 60%)">awk</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;{print $4}&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">sort</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-n</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> position_stats.txt</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">      </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> /dev/null</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># All three statistics generated from a single read of input.bam</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-pipe-gotchas-and-solutions">Common Pipe Gotchas and Solutions<a href="#common-pipe-gotchas-and-solutions" class="hash-link" aria-label="Direct link to Common Pipe Gotchas and Solutions" title="Direct link to Common Pipe Gotchas and Solutions" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-buffering-issues-with-pipes">1. Buffering Issues with Pipes<a href="#1-buffering-issues-with-pipes" class="hash-link" aria-label="Direct link to 1. Buffering Issues with Pipes" title="Direct link to 1. Buffering Issues with Pipes" translate="no">​</a></h3>
<p><strong>Problem:</strong> Interactive commands don&#x27;t flush output in pipes</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># This might hang (python buffers output in pipe mode)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">python long_script.py </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">tee</span><span class="token plain"> output.log</span><br></span></code></pre></div></div>
<p><strong>Solution:</strong> Disable buffering</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Python: Use -u flag or stdbuf</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">python </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-u</span><span class="token plain"> long_script.py </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">tee</span><span class="token plain"> output.log</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Or use stdbuf</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">stdbuf </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-oL</span><span class="token plain"> python long_script.py </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">tee</span><span class="token plain"> output.log</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-error-handling-in-pipes">2. Error Handling in Pipes<a href="#2-error-handling-in-pipes" class="hash-link" aria-label="Direct link to 2. Error Handling in Pipes" title="Direct link to 2. Error Handling in Pipes" translate="no">​</a></h3>
<p><strong>Problem:</strong> Errors in the middle command are silent</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># If samtools fails, cat and downstream still succeed!</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> input.bam </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> samtools view </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-b</span><span class="token plain"> - </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> output.bam </span><span class="token operator file-descriptor important" style="color:hsl(230, 8%, 24%);font-weight:bold">2</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">/dev/null</span><br></span></code></pre></div></div>
<p><strong>Solution:</strong> Set pipefail</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># If ANY command fails, the entire pipeline fails</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">set</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-o</span><span class="token plain"> pipefail</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> input.bam </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> samtools view </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-b</span><span class="token plain"> - </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> output.bam</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-monitoring-pipeline-progress">3. Monitoring Pipeline Progress<a href="#3-monitoring-pipeline-progress" class="hash-link" aria-label="Direct link to 3. Monitoring Pipeline Progress" title="Direct link to 3. Monitoring Pipeline Progress" translate="no">​</a></h3>
<p><strong>Problem:</strong> Pipes process data silently—hard to see progress</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># No feedback on progress</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> input.fastq </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> process_cmd </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">sort</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> output.txt</span><br></span></code></pre></div></div>
<p><strong>Solution:</strong> Use <code>pv</code> (pipe viewer) to visualize throughput</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Shows progress, speed, and ETA</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> input.fastq </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">pv</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> process_cmd </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">sort</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> output.txt</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Or with file size estimation</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">pv</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-N</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&quot;Reading FASTQ&quot;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain"> input.fastq </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> process_cmd </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">pv</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-N</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&quot;Sorting output&quot;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">sort</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> output.txt</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-debugging-pipe-failures">4. Debugging Pipe Failures<a href="#4-debugging-pipe-failures" class="hash-link" aria-label="Direct link to 4. Debugging Pipe Failures" title="Direct link to 4. Debugging Pipe Failures" translate="no">​</a></h3>
<p><strong>Problem:</strong> Which command in the pipeline failed?</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Unclear where failure occurred</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">cmd1 </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> cmd2 </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> cmd3 </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> cmd4 failed but </span><span class="token function" style="color:hsl(221, 87%, 60%)">which</span><span class="token plain"> one?</span><br></span></code></pre></div></div>
<p><strong>Solution:</strong> Use intermediate tee files for debugging</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Save intermediate outputs while piping</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">cmd1 </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">tee</span><span class="token plain"> /tmp/debug1.txt </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  cmd2 </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">tee</span><span class="token plain"> /tmp/debug2.txt </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  cmd3 </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">tee</span><span class="token plain"> /tmp/debug3.txt </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  cmd4</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Later, inspect intermediates</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> /tmp/debug1.txt </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">head</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> /tmp/debug2.txt </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">head</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> /tmp/debug3.txt </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">head</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="using-pipes-in-nextflow-modules">Using Pipes in Nextflow Modules<a href="#using-pipes-in-nextflow-modules" class="hash-link" aria-label="Direct link to Using Pipes in Nextflow Modules" title="Direct link to Using Pipes in Nextflow Modules" translate="no">​</a></h2>
<p>Nextflow pipelines are built from individual processes, and each process can use pipes internally to efficiently chain tools together. This is where pipes truly shine in production bioinformatics workflows.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="real-example-bwa_mem-process-from-sarek">Real Example: BWA_MEM Process from Sarek<a href="#real-example-bwa_mem-process-from-sarek" class="hash-link" aria-label="Direct link to Real Example: BWA_MEM Process from Sarek" title="Direct link to Real Example: BWA_MEM Process from Sarek" translate="no">​</a></h3>
<p>The Sarek variant calling pipeline includes a <code>BWA_MEM</code> process that demonstrates best practices for using pipes in Nextflow. Let&#x27;s examine how pipes reduce intermediate files:</p>
<div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">process BWA_MEM </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    tag </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">$</span><span class="token interpolation-string interpolation expression">meta</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">.id&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    label </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;process_high&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    conda </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">${</span><span class="token interpolation-string interpolation expression">moduleDir</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">/environment.yml&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    container &quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">$</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">containerEngine </span><span class="token operator" style="color:hsl(221, 87%, 60%)">==</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;singularity&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain">task</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">ext</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">singularity_pull_docker_container </span><span class="token operator" style="color:hsl(221, 87%, 60%)">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;https://community-cr-prod.seqera.io/docker/registry/v2/blobs/sha256/bf/bf7890f8d4e38a7586581cb7fa13401b7af1582f21d94eef969df4cea852b6da/data&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;community.wave.seqera.io/library/bwa_htslib_samtools:56c9f8d5201889a4&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain">&quot;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    input</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    tuple </span><span class="token function" style="color:hsl(221, 87%, 60%)">val</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">meta</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">path</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">reads</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    tuple </span><span class="token function" style="color:hsl(221, 87%, 60%)">val</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">meta2</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">path</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">index</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    tuple </span><span class="token function" style="color:hsl(221, 87%, 60%)">val</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">meta3</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">path</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">fasta</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    val   sort_bam</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    output</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    tuple </span><span class="token function" style="color:hsl(221, 87%, 60%)">val</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">meta</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">path</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;*.bam&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain">  </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> emit</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> bam</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain">    optional</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(35, 99%, 36%)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    tuple </span><span class="token function" style="color:hsl(221, 87%, 60%)">val</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">meta</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">path</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;*.cram&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> emit</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> cram</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain">   optional</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(35, 99%, 36%)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    tuple </span><span class="token function" style="color:hsl(221, 87%, 60%)">val</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">meta</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">path</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;*.csi&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain">  </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> emit</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> csi</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain">    optional</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(35, 99%, 36%)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    tuple </span><span class="token function" style="color:hsl(221, 87%, 60%)">val</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">meta</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">path</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;*.crai&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> emit</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> crai</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain">   optional</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(35, 99%, 36%)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    path  </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;versions.yml&quot;</span><span class="token plain">            </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> emit</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> versions</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token spock-block">when:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    task</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">ext</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">when </span><span class="token operator" style="color:hsl(221, 87%, 60%)">==</span><span class="token plain"> null </span><span class="token operator" style="color:hsl(221, 87%, 60%)">||</span><span class="token plain"> task</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">ext</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">when</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    script</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">def</span><span class="token plain"> args </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> task</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">ext</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">args </span><span class="token operator" style="color:hsl(221, 87%, 60%)">?:</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">def</span><span class="token plain"> args2 </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> task</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">ext</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">args2 </span><span class="token operator" style="color:hsl(221, 87%, 60%)">?:</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">def</span><span class="token plain"> prefix </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> task</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">ext</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">prefix </span><span class="token operator" style="color:hsl(221, 87%, 60%)">?:</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">${</span><span class="token interpolation-string interpolation expression">meta</span><span class="token interpolation-string interpolation expression punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token interpolation-string interpolation expression">id</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">def</span><span class="token plain"> samtools_command </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> sort_bam </span><span class="token operator" style="color:hsl(221, 87%, 60%)">?</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;sort&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;view&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">def</span><span class="token plain"> extension </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> args2</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">contains</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;--output-fmt sam&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain">   </span><span class="token operator" style="color:hsl(221, 87%, 60%)">?</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;sam&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                    args2</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">contains</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;--output-fmt cram&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain">  </span><span class="token operator" style="color:hsl(221, 87%, 60%)">?</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;cram&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                    sort_bam </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;&amp;</span><span class="token plain"> args2</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">contains</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;-O cram&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token operator" style="color:hsl(221, 87%, 60%)">?</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;cram&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                    </span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain">sort_bam </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;&amp;</span><span class="token plain"> args2</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">contains</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;-C&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain">    </span><span class="token operator" style="color:hsl(221, 87%, 60%)">?</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;cram&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                    </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;bam&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">def</span><span class="token plain"> reference </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> fasta </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;&amp;</span><span class="token plain"> extension</span><span class="token operator" style="color:hsl(221, 87%, 60%)">==</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;cram&quot;</span><span class="token plain">  </span><span class="token operator" style="color:hsl(221, 87%, 60%)">?</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;--reference </span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">${</span><span class="token interpolation-string interpolation expression">fasta</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain">fasta </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;&amp;</span><span class="token plain"> extension</span><span class="token operator" style="color:hsl(221, 87%, 60%)">==</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;cram&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> error </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;Fasta reference is required for CRAM output&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">    INDEX=`find -L ./ -name &quot;*.amb&quot; | sed &#x27;s/\\.amb\$//&#x27;`</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="display:inline-block;color:hsl(119, 34%, 47%)"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">    bwa mem \\</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">        </span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">$</span><span class="token interpolation-string interpolation expression">args</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)"> \\</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">        -t </span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">$</span><span class="token interpolation-string interpolation expression">task</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">.cpus \\</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">        \$INDEX \\</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">        </span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">$</span><span class="token interpolation-string interpolation expression">reads</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)"> \\</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">        | samtools </span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">$</span><span class="token interpolation-string interpolation expression">samtools_command</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)"> </span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">$</span><span class="token interpolation-string interpolation expression">args2</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)"> </span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">${</span><span class="token interpolation-string interpolation expression">reference</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)"> --threads </span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">$</span><span class="token interpolation-string interpolation expression">task</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">.cpus -o </span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">${</span><span class="token interpolation-string interpolation expression">prefix</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">.</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">${</span><span class="token interpolation-string interpolation expression">extension</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)"> -</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="display:inline-block;color:hsl(119, 34%, 47%)"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">    cat &lt;&lt;-END_VERSIONS &gt; versions.yml</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">    &quot;</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">${</span><span class="token interpolation-string interpolation expression">task</span><span class="token interpolation-string interpolation expression punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token interpolation-string interpolation expression">process</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;:</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">        bwa: \$(echo \$(bwa 2&gt;&amp;1) | sed &#x27;s/^.*Version: //; s/Contact:.*\$//&#x27;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">        samtools: \$(echo \$(samtools --version 2&gt;&amp;1) | sed &#x27;s/^.*samtools //; s/Using.*\$//&#x27;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">    END_VERSIONS</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    stub</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">def</span><span class="token plain"> args2 </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> task</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">ext</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">args2 </span><span class="token operator" style="color:hsl(221, 87%, 60%)">?:</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">def</span><span class="token plain"> prefix </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> task</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">ext</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">prefix </span><span class="token operator" style="color:hsl(221, 87%, 60%)">?:</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">${</span><span class="token interpolation-string interpolation expression">meta</span><span class="token interpolation-string interpolation expression punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token interpolation-string interpolation expression">id</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">def</span><span class="token plain"> extension </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> args2</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">contains</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;--output-fmt sam&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain">   </span><span class="token operator" style="color:hsl(221, 87%, 60%)">?</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;sam&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                    args2</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">contains</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;--output-fmt cram&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain">  </span><span class="token operator" style="color:hsl(221, 87%, 60%)">?</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;cram&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                    sort_bam </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;&amp;</span><span class="token plain"> args2</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">contains</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;-O cram&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token operator" style="color:hsl(221, 87%, 60%)">?</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;cram&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                    </span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain">sort_bam </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;&amp;</span><span class="token plain"> args2</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">contains</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;-C&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain">    </span><span class="token operator" style="color:hsl(221, 87%, 60%)">?</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;cram&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                    </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;bam&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">    touch </span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">${</span><span class="token interpolation-string interpolation expression">prefix</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">.</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">${</span><span class="token interpolation-string interpolation expression">extension</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">    touch </span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">${</span><span class="token interpolation-string interpolation expression">prefix</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">.csi</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">    touch </span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">${</span><span class="token interpolation-string interpolation expression">prefix</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">.crai</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="display:inline-block;color:hsl(119, 34%, 47%)"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">    cat &lt;&lt;-END_VERSIONS &gt; versions.yml</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">    &quot;</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">${</span><span class="token interpolation-string interpolation expression">task</span><span class="token interpolation-string interpolation expression punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token interpolation-string interpolation expression">process</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;:</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">        bwa: \$(echo \$(bwa 2&gt;&amp;1) | sed &#x27;s/^.*Version: //; s/Contact:.*\$//&#x27;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">        samtools: \$(echo \$(samtools --version 2&gt;&amp;1) | sed &#x27;s/^.*samtools //; s/Using.*\$//&#x27;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">    END_VERSIONS</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="understanding-the-pipe-in-bwa_mem">Understanding the Pipe in BWA_MEM<a href="#understanding-the-pipe-in-bwa_mem" class="hash-link" aria-label="Direct link to Understanding the Pipe in BWA_MEM" title="Direct link to Understanding the Pipe in BWA_MEM" translate="no">​</a></h3>
<p>The key line in this process is the pipe connecting bwa and samtools:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">bwa mem </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$args</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-t</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$task</span><span class="token plain">.cpus </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$INDEX</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$reads</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> samtools </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$samtools_command</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$args2</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">${reference}</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--threads</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$task</span><span class="token plain">.cpus </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-o</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">${prefix}</span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">.</span><span class="token variable" style="color:hsl(221, 87%, 60%)">${extension}</span><span class="token plain"> -</span><br></span></code></pre></div></div>
<p><strong>Here&#x27;s what happens:</strong></p>
<ol>
<li class="">
<p><strong>bwa mem</strong> aligns reads to reference genome</p>
<ul>
<li class="">Outputs SAM format to stdout</li>
<li class="">This is hundreds of GB for large genomes</li>
<li class=""><strong>Without the pipe,</strong> this would be written to disk as an intermediate <code>.sam</code> file</li>
</ul>
</li>
<li class="">
<p><strong>Pipe (|)</strong> connects output directly to samtools</p>
<ul>
<li class="">Data streams from bwa to samtools in memory</li>
<li class="">No intermediate SAM file created</li>
<li class="">Constant memory usage regardless of dataset size</li>
</ul>
</li>
<li class="">
<p><strong>samtools sort/view</strong> processes the SAM stream</p>
<ul>
<li class="">Either sorts (if <code>sort_bam=true</code>) or just converts format</li>
<li class="">Final output directly to <code>.bam</code>, <code>.cram</code>, or <code>.sam</code></li>
<li class="">Uses <code>--threads $task.cpus</code> to parallelize efficiently</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="benefits-in-this-real-workflow">Benefits in This Real Workflow<a href="#benefits-in-this-real-workflow" class="hash-link" aria-label="Direct link to Benefits in This Real Workflow" title="Direct link to Benefits in This Real Workflow" translate="no">​</a></h3>
<p>For a <strong>human whole-genome sequencing run</strong> (~100GB raw reads):</p>
<p><strong>Without pipes (hypothetical):</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">bwa mem $INDEX $reads &gt; aligned.sam      # 500+ GB intermediate</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">samtools sort aligned.sam &gt; sorted.bam   # 100+ GB final</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">rm aligned.sam</span><br></span></code></pre></div></div>
<ul>
<li class="">Storage needed: 600+ GB</li>
<li class="">Disk I/O: Read 100GB (bwa) + Write 500GB (SAM) + Read 500GB (samtools) = 1.1TB of I/O</li>
<li class="">Time: Significantly slower due to I/O contention</li>
</ul>
<p><strong>With pipes (Sarek approach):</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">bwa mem $INDEX $reads | samtools sort -o sorted.bam -</span><br></span></code></pre></div></div>
<ul>
<li class="">Storage needed: 100 GB (final output only)</li>
<li class="">Disk I/O: Read 100GB (bwa input) + Write 100GB (final BAM) = 200GB of I/O</li>
<li class="">Time: 2-5x faster due to eliminated intermediate I/O</li>
<li class="">Memory: Constant (~2-3GB) regardless of genome size</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="flexibility-through-arguments">Flexibility Through Arguments<a href="#flexibility-through-arguments" class="hash-link" aria-label="Direct link to Flexibility Through Arguments" title="Direct link to Flexibility Through Arguments" translate="no">​</a></h3>
<p>The Sarek process demonstrates production-grade flexibility:</p>
<div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">def</span><span class="token plain"> samtools_command </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> sort_bam </span><span class="token operator" style="color:hsl(221, 87%, 60%)">?</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;sort&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;view&#x27;</span><br></span></code></pre></div></div>
<p>This single line allows switching between:</p>
<ul>
<li class=""><strong>Sorting in the pipeline</strong> (slower but sorted output)</li>
<li class=""><strong>No sorting</strong> (faster, relies on downstream tools)</li>
</ul>
<p>And the extension can be dynamically chosen:</p>
<div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">def</span><span class="token plain"> extension </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> args2</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">contains</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;--output-fmt cram&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">?</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;cram&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:hsl(119, 34%, 47%)">&quot;bam&quot;</span><br></span></code></pre></div></div>
<p>This means the <strong>same process</strong> can output BAM, CRAM, or SAM depending on configuration—all using the same efficient pipe pattern.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="error-handling-in-nextflow-processes">Error Handling in Nextflow Processes<a href="#error-handling-in-nextflow-processes" class="hash-link" aria-label="Direct link to Error Handling in Nextflow Processes" title="Direct link to Error Handling in Nextflow Processes" translate="no">​</a></h3>
<p>Nextflow automatically handles pipe failures. If any command in the chain fails:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">bwa mem </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">..</span><span class="token plain">. </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> samtools </span><span class="token function" style="color:hsl(221, 87%, 60%)">sort</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">..</span><span class="token plain">.  </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># If either fails, Nextflow catches it</span><br></span></code></pre></div></div>
<p>The entire task is marked as failed, and error logs are captured. This is superior to manual bash scripts where errors can be silent.</p>
<p><strong>To ensure pipeline stops on any error,</strong> include at the top of your Nextflow script:</p>
<div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">process </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    shell </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;/bin/bash&#x27;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;-euo&#x27;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;pipefail&#x27;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">  </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// -o pipefail catches pipe errors</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br></span></code></pre></div></div>
<p>This ensures that if bwa fails and outputs nothing, samtools will detect it as an error rather than silently succeeding on empty input.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="pipes-for-download-upload-and-cloud-storage">Pipes for Download, Upload, and Cloud Storage<a href="#pipes-for-download-upload-and-cloud-storage" class="hash-link" aria-label="Direct link to Pipes for Download, Upload, and Cloud Storage" title="Direct link to Pipes for Download, Upload, and Cloud Storage" translate="no">​</a></h2>
<p>One of the most practical uses of pipes in bioinformatics is combining download/upload tools with data processing, eliminating intermediate files entirely. This is especially valuable when working with cloud storage like AWS S3.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-1-download--decompress--process-no-temp-files">Example 1: Download → Decompress → Process (No Temp Files)<a href="#example-1-download--decompress--process-no-temp-files" class="hash-link" aria-label="Direct link to Example 1: Download → Decompress → Process (No Temp Files)" title="Direct link to Example 1: Download → Decompress → Process (No Temp Files)" translate="no">​</a></h3>
<p><strong>Scenario:</strong> You need to download a compressed reference genome from a public server, decompress it, and index it—all without storing the compressed file.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Traditional approach (❌ Wasteful)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">wget</span><span class="token plain"> https://example.com/reference.fasta.gz  </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Downloads 5GB</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">gunzip reference.fasta.gz                     </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Decompresses to 15GB</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">samtools faidx reference.fasta                </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Index the reference</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">rm</span><span class="token plain"> reference.fasta                            </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Cleanup takes time</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Total disk space needed: 20GB</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Pipe approach (✓ Efficient)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">wget</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-q</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-O</span><span class="token plain"> - https://example.com/reference.fasta.gz </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  gunzip </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  samtools faidx /dev/stdin</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Total disk space needed: 15GB (final reference only)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># No temporary files, no cleanup needed</span><br></span></code></pre></div></div>
<p><strong>What happens:</strong></p>
<ol>
<li class=""><code>wget -O -</code> downloads to stdout (not to disk)</li>
<li class=""><code>gunzip</code> decompresses the stream on-the-fly</li>
<li class=""><code>samtools faidx /dev/stdin</code> creates the index directly from the stream</li>
<li class="">Final reference file and index stored without intermediate compressed file</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-2-process--compress--upload-to-s3-single-pipeline">Example 2: Process → Compress → Upload to S3 (Single Pipeline)<a href="#example-2-process--compress--upload-to-s3-single-pipeline" class="hash-link" aria-label="Direct link to Example 2: Process → Compress → Upload to S3 (Single Pipeline)" title="Direct link to Example 2: Process → Compress → Upload to S3 (Single Pipeline)" translate="no">​</a></h3>
<p><strong>Scenario:</strong> Process sequencing data and upload the compressed results directly to AWS S3 without creating local compressed files.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Traditional approach (❌ Wasteful)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">bwa mem reference.fa reads.fastq </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> samtools </span><span class="token function" style="color:hsl(221, 87%, 60%)">sort</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-o</span><span class="token plain"> aligned.bam -</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">gzip</span><span class="token plain"> aligned.bam                           </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Creates aligned.bam.gz (100+ GB)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">aws s3 </span><span class="token function" style="color:hsl(221, 87%, 60%)">cp</span><span class="token plain"> aligned.bam.gz s3://my-bucket/  </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Upload</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">rm</span><span class="token plain"> aligned.bam.gz                          </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Cleanup</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Total disk space: 200+ GB (original BAM + compressed file)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Pipe approach (✓ Efficient)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">bwa mem reference.fa reads.fastq </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  samtools </span><span class="token function" style="color:hsl(221, 87%, 60%)">sort</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-b</span><span class="token plain"> - </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">gzip</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  aws s3 </span><span class="token function" style="color:hsl(221, 87%, 60%)">cp</span><span class="token plain"> - s3://my-bucket/aligned.bam.gz</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Total disk space: 0 GB temporary files</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Compressed data uploaded directly to S3</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Only stores the final index or metadata files locally</span><br></span></code></pre></div></div>
<p><strong>What happens:</strong></p>
<ol>
<li class=""><code>bwa mem</code> and <code>samtools sort</code> chain together (as before)</li>
<li class=""><code>gzip</code> compresses the BAM stream on-the-fly</li>
<li class=""><code>aws s3 cp -</code> uploads directly from stdin to S3</li>
<li class="">Data never exists uncompressed on disk</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-3-download-from-s3--decompress--analyze-no-local-copy">Example 3: Download from S3 → Decompress → Analyze (No Local Copy)<a href="#example-3-download-from-s3--decompress--analyze-no-local-copy" class="hash-link" aria-label="Direct link to Example 3: Download from S3 → Decompress → Analyze (No Local Copy)" title="Direct link to Example 3: Download from S3 → Decompress → Analyze (No Local Copy)" translate="no">​</a></h3>
<p><strong>Scenario:</strong> Analyze BAM files stored in S3 without downloading the entire uncompressed file locally.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Traditional approach (❌ Wasteful)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">aws s3 </span><span class="token function" style="color:hsl(221, 87%, 60%)">cp</span><span class="token plain"> s3://my-bucket/sample.bam.gz </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">.</span><span class="token plain">   </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Download 50GB</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">gunzip sample.bam.gz                        </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Decompress to 150GB</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">samtools flagstat sample.bam                </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Analyze</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Local disk: 200GB, slow downloads</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Pipe approach (✓ Efficient)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">aws s3 </span><span class="token function" style="color:hsl(221, 87%, 60%)">cp</span><span class="token plain"> s3://my-bucket/sample.bam.gz - </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  gunzip </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  samtools flagstat /dev/stdin</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Local disk: 0 GB temporary files</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Stream analysis, no storage overhead</span><br></span></code></pre></div></div>
<p><strong>What happens:</strong></p>
<ol>
<li class=""><code>aws s3 cp - s3://...</code> downloads from S3 to stdout</li>
<li class=""><code>gunzip</code> decompresses the stream</li>
<li class=""><code>samtools flagstat</code> reads and analyzes directly from the pipe</li>
<li class="">Only metadata (flagstat results) stored locally</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-4-download-tarball--extract--index-no-intermediate-files">Example 4: Download Tarball → Extract → Index (No Intermediate Files)<a href="#example-4-download-tarball--extract--index-no-intermediate-files" class="hash-link" aria-label="Direct link to Example 4: Download Tarball → Extract → Index (No Intermediate Files)" title="Direct link to Example 4: Download Tarball → Extract → Index (No Intermediate Files)" translate="no">​</a></h3>
<p><strong>Scenario:</strong> Download a compressed archive of reference sequences, extract, and index—all in one pipeline.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Traditional approach (❌ Wasteful)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">wget</span><span class="token plain"> https://example.com/genomes.tar.gz    </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># 10GB download</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">tar</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-xzf</span><span class="token plain"> genomes.tar.gz                     </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Extracts to 50GB</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:hsl(221, 87%, 60%)">ref</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"> genomes/*.fasta</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  samtools faidx </span><span class="token string" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token string variable" style="color:hsl(221, 87%, 60%)">$ref</span><span class="token string" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-rf</span><span class="token plain"> genomes.tar.gz genomes/              </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Cleanup</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Disk space: 60GB temporary files</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Pipe approach (✓ Efficient)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">wget</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-q</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-O</span><span class="token plain"> - https://example.com/genomes.tar.gz </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">tar</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-xz</span><span class="token plain"> --to-stdout </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">while</span><span class="token plain"> </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">read</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-r</span><span class="token plain"> line</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">echo</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token string variable" style="color:hsl(221, 87%, 60%)">$line</span><span class="token string" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;&gt;</span><span class="token plain"> current_genome.fasta</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token string variable" style="color:hsl(221, 87%, 60%)">$line</span><span class="token string" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=~</span><span class="token plain"> ^</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-s</span><span class="token plain"> current_genome.fasta </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">      samtools faidx current_genome.fasta</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Or more elegantly with GNU tar:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">wget</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-q</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-O</span><span class="token plain"> - https://example.com/genomes.tar.gz </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">tar</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-xz</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-C</span><span class="token plain"> /dev/shm  </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Extract to RAM disk (if available)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Disk space: Only final index files</span><br></span></code></pre></div></div>
<p><strong>Better approach with GNU tar&#x27;s streaming:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Extract specific files from tarball without decompressing entire archive</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">wget</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-q</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-O</span><span class="token plain"> - https://example.com/genomes.tar.gz </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">tar</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-xzf</span><span class="token plain"> - genomes/reference.fasta --to-stdout </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  samtools faidx /dev/stdin</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-5-process-multiple-files-from-s3-with-gnu-parallel">Example 5: Process Multiple Files from S3 with GNU Parallel<a href="#example-5-process-multiple-files-from-s3-with-gnu-parallel" class="hash-link" aria-label="Direct link to Example 5: Process Multiple Files from S3 with GNU Parallel" title="Direct link to Example 5: Process Multiple Files from S3 with GNU Parallel" translate="no">​</a></h3>
<p><strong>Scenario:</strong> Process many files in S3 in parallel using pipes and parallel processing.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># List all BAM files in S3 and process in parallel</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">aws s3 </span><span class="token function" style="color:hsl(221, 87%, 60%)">ls</span><span class="token plain"> s3://my-bucket/bams/ </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--recursive</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">awk</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;{print $4}&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  parallel </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--pipe</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--block</span><span class="token plain"> 10M </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;aws s3 cp &quot;s3://my-bucket/{}&quot; - | \</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token string" style="color:hsl(119, 34%, 47%)">   samtools view -b -F 4 | \</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token string" style="color:hsl(119, 34%, 47%)">   samtools sort -o {/.}.sorted.bam -&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># What happens:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># 1. List all S3 objects</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># 2. Process up to N files in parallel</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># 3. Each file is downloaded and piped directly to samtools</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># 4. Results written back to disk (or piped to another command)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-6-bidirectional-piping-upload-results-as-theyre-generated">Example 6: Bidirectional Piping: Upload Results as They&#x27;re Generated<a href="#example-6-bidirectional-piping-upload-results-as-theyre-generated" class="hash-link" aria-label="Direct link to Example 6: Bidirectional Piping: Upload Results as They&#x27;re Generated" title="Direct link to Example 6: Bidirectional Piping: Upload Results as They&#x27;re Generated" translate="no">​</a></h3>
<p><strong>Scenario:</strong> Generate analysis results and upload to S3 incrementally (useful for long-running processes).</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Real-time upload of VCF variants as they&#x27;re discovered</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">bcftools mpileup </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-f</span><span class="token plain"> reference.fa sample.bam </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  bcftools call </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-m</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">tee</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token function" style="color:hsl(221, 87%, 60%)">gzip</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> aws s3 </span><span class="token function" style="color:hsl(221, 87%, 60%)">cp</span><span class="token plain"> - s3://my-bucket/variants.vcf.gz</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">grep</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-v</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&quot;^#&quot;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">wc</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-l</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># What happens:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># 1. bcftools generates variants</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># 2. tee splits the stream into two paths:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#    - First path: gzip and upload to S3 in real-time</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#    - Second path: count total variants</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># 3. Both operations happen simultaneously from a single bcftools stream</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># 4. Results available in S3 even while analysis continues</span><br></span></code></pre></div></div>
<p><strong>Real-world use case:</strong> Monitoring long-running analyses without waiting for completion:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Start a 24-hour variant calling run with real-time uploading</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">samtools mpileup </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-f</span><span class="token plain"> ref.fa *.bam </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  bcftools call </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-m</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-v</span><span class="token plain"> </span><span class="token operator file-descriptor important" style="color:hsl(230, 8%, 24%);font-weight:bold">2</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">/tmp/variants.log </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">tee</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token function" style="color:hsl(221, 87%, 60%)">gzip</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> aws s3 </span><span class="token function" style="color:hsl(221, 87%, 60%)">cp</span><span class="token plain"> - s3://bucket/live-variants.vcf.gz</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">tail</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-100</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">grep</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&quot;PASS&quot;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> /tmp/latest_variants.txt</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># In another terminal, monitor progress:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">watch</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-n</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">10</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&quot;wc -l /tmp/latest_variants.txt &amp;&amp; aws s3 ls s3://bucket/live-variants.vcf.gz&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="tips-for-reliable-downloadupload-pipes">Tips for Reliable Download/Upload Pipes<a href="#tips-for-reliable-downloadupload-pipes" class="hash-link" aria-label="Direct link to Tips for Reliable Download/Upload Pipes" title="Direct link to Tips for Reliable Download/Upload Pipes" translate="no">​</a></h3>
<table><thead><tr><th>Scenario</th><th>Pipe Command</th><th>Notes</th></tr></thead><tbody><tr><td><strong>Download + decompress</strong></td><td><code>wget -O - | gunzip | process</code></td><td>Use <code>-O -</code> to output to stdout</td></tr><tr><td><strong>Upload + compress</strong></td><td><code>process | gzip | aws s3 cp -</code></td><td>Pipe <code>-</code> for stdin/stdout</td></tr><tr><td><strong>S3 download + analyze</strong></td><td><code>aws s3 cp s3://... - | process</code></td><td><code>-</code> reads from stdin to stdout</td></tr><tr><td><strong>Tar extract streaming</strong></td><td><code>wget -O - tar.gz | tar -xz -O file</code></td><td><code>-O</code> or <code>--to-stdout</code> extracts to stdout</td></tr><tr><td><strong>Multiple S3 files</strong></td><td>Use <code>aws s3 ls</code> + <code>parallel</code></td><td>Chain with <code>aws s3 cp s3://... -</code></td></tr><tr><td><strong>Real-time monitoring</strong></td><td>Use <code>tee</code> for branching</td><td>Simultaneous upload and local processing</td></tr><tr><td><strong>Error handling</strong></td><td>Check exit codes with <code>set -o pipefail</code></td><td>S3 errors need to fail the pipeline</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="critical-considerations-for-cloud-pipes">Critical Considerations for Cloud Pipes<a href="#critical-considerations-for-cloud-pipes" class="hash-link" aria-label="Direct link to Critical Considerations for Cloud Pipes" title="Direct link to Critical Considerations for Cloud Pipes" translate="no">​</a></h3>
<p><strong>1. Network vs. Disk Bottleneck</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># If network is slower than local processing:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Download once, process multiple times</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">wget</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-O</span><span class="token plain"> - file.tar.gz </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">tee</span><span class="token plain"> local.tar.gz </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">tar</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-xz</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> process1</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">tar</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-xz</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain"> local.tar.gz </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> process2</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">tar</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-xz</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain"> local.tar.gz </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> process3</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Tradeoff: Local storage vs. network bandwidth</span><br></span></code></pre></div></div>
<p><strong>2. Retry Logic for Failed S3 Operations</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Simple retry with exponential backoff</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">retry_count</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">while</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$retry_count</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-lt</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">3</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  aws s3 </span><span class="token function" style="color:hsl(221, 87%, 60%)">cp</span><span class="token plain"> s3://bucket/file - </span><span class="token operator file-descriptor important" style="color:hsl(230, 8%, 24%);font-weight:bold">2</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">/dev/null </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">break</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">retry_count</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token variable" style="color:hsl(221, 87%, 60%)">$((</span><span class="token variable" style="color:hsl(221, 87%, 60%)">retry_count </span><span class="token variable operator" style="color:hsl(221, 87%, 60%)">+</span><span class="token variable" style="color:hsl(221, 87%, 60%)"> </span><span class="token variable number" style="color:hsl(35, 99%, 36%)">1</span><span class="token variable" style="color:hsl(221, 87%, 60%)">))</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">sleep</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$((</span><span class="token variable number" style="color:hsl(35, 99%, 36%)">2</span><span class="token variable" style="color:hsl(221, 87%, 60%)"> </span><span class="token variable operator" style="color:hsl(221, 87%, 60%)">**</span><span class="token variable" style="color:hsl(221, 87%, 60%)"> retry_count</span><span class="token variable" style="color:hsl(221, 87%, 60%)">))</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">done</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> gunzip </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> process</span><br></span></code></pre></div></div>
<p><strong>3. Monitoring Upload Progress</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Use pv to monitor upload speed</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">process_data </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">pv</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-br</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">gzip</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  aws s3 </span><span class="token function" style="color:hsl(221, 87%, 60%)">cp</span><span class="token plain"> - s3://bucket/file.gz</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Output: [1.2GB/s] or similar</span><br></span></code></pre></div></div>
<p><strong>4. Handling Large Files with Multipart Upload</strong></p>
<p>For files larger than a few GB, AWS S3 multipart uploads are more reliable:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># aws s3 cp already handles multipart, but for custom control:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">process_data </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">gzip</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  aws s3 </span><span class="token function" style="color:hsl(221, 87%, 60%)">cp</span><span class="token plain"> - s3://bucket/large-file.gz </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--sse</span><span class="token plain"> AES256 </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    --storage-class GLACIER  </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Optional: cheaper storage class</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="real-world-bioinformatics-pipes">Real-World Bioinformatics Pipes<a href="#real-world-bioinformatics-pipes" class="hash-link" aria-label="Direct link to Real-World Bioinformatics Pipes" title="Direct link to Real-World Bioinformatics Pipes" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-1-rna-seq-quality-control-pipeline">Example 1: RNA-seq Quality Control Pipeline<a href="#example-1-rna-seq-quality-control-pipeline" class="hash-link" aria-label="Direct link to Example 1: RNA-seq Quality Control Pipeline" title="Direct link to Example 1: RNA-seq Quality Control Pipeline" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Process RNA-seq reads:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># 1. Filter low quality</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># 2. Count valid reads</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># 3. Extract length distribution</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># 4. Detect adapters</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">fastq_quality_filter </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-i</span><span class="token plain"> reads.fastq </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-q</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">20</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-p</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">80</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">tee</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token function" style="color:hsl(221, 87%, 60%)">wc</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-l</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">awk</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;{print &quot;Valid reads: &quot;$1/4}&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> read_count.txt</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">tee</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token function" style="color:hsl(221, 87%, 60%)">awk</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;NR%4==2 {print length}&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token function" style="color:hsl(221, 87%, 60%)">sort</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-n</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">uniq</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-c</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> length_dist.txt</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  fastx_collapser </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-o</span><span class="token plain"> collapsed.fastq </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  fastx_clipper </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-a</span><span class="token plain"> AGATCGGAAGAGC </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-o</span><span class="token plain"> trimmed.fastq</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-2-variant-calling-pipeline">Example 2: Variant Calling Pipeline<a href="#example-2-variant-calling-pipeline" class="hash-link" aria-label="Direct link to Example 2: Variant Calling Pipeline" title="Direct link to Example 2: Variant Calling Pipeline" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Align reads, mark duplicates, and call variants in one pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">bwa mem </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-t</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">8</span><span class="token plain"> reference.fa reads.fastq </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  samtools view </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-b</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-S</span><span class="token plain"> - </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  samtools </span><span class="token function" style="color:hsl(221, 87%, 60%)">sort</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-o</span><span class="token plain"> sorted.bam - </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  samtools markdup sorted.bam marked.bam </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  samtools index marked.bam </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  bcftools mpileup </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-f</span><span class="token plain"> reference.fa marked.bam </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  bcftools call </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-mv</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-o</span><span class="token plain"> variants.vcf</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Memory: Constant (~1-2 GB for buffers)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Disk: Only intermediate files marked.bam (necessary for bcftools indexing)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-3-fasta-processing-with-decompression">Example 3: FASTA Processing with Decompression<a href="#example-3-fasta-processing-with-decompression" class="hash-link" aria-label="Direct link to Example 3: FASTA Processing with Decompression" title="Direct link to Example 3: FASTA Processing with Decompression" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Decompress, process, and recompress in a single pipeline</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">zcat genome.fasta.gz </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">awk</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;/^&gt;/{if(NR&gt;1)print prev_seq; seq=&quot;&quot;; prev_seq=$0; next} {seq=seq $0} END{print prev_seq; print seq}&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token function" style="color:hsl(221, 87%, 60%)">gzip</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> processed.fasta.gz</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># No intermediate uncompressed files</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Entire genome processed with minimal disk space</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="summary-why-pipes-matter-in-bioinformatics">Summary: Why Pipes Matter in Bioinformatics<a href="#summary-why-pipes-matter-in-bioinformatics" class="hash-link" aria-label="Direct link to Summary: Why Pipes Matter in Bioinformatics" title="Direct link to Summary: Why Pipes Matter in Bioinformatics" translate="no">​</a></h2>
<table><thead><tr><th>Problem</th><th>Pipe Solution</th></tr></thead><tbody><tr><td><strong>Intermediate files</strong></td><td>Stream directly between tools</td></tr><tr><td><strong>Disk space</strong></td><td>No temporary storage needed</td></tr><tr><td><strong>Memory usage</strong></td><td>Constant, independent of data size</td></tr><tr><td><strong>Processing speed</strong></td><td>Single sequential read of data</td></tr><tr><td><strong>Failure recovery</strong></td><td>Failures caught immediately</td></tr><tr><td><strong>Code readability</strong></td><td>Clear, linear data flow</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="key-takeaways">Key Takeaways<a href="#key-takeaways" class="hash-link" aria-label="Direct link to Key Takeaways" title="Direct link to Key Takeaways" translate="no">​</a></h3>
<p><strong>1. Pipes Enable Streaming Data Processing</strong></p>
<ul>
<li class="">Data flows through memory buffers, not disk</li>
<li class="">Only ~64KB per pipe sits in RAM at any time</li>
<li class="">Processing 1GB or 1TB uses the same constant memory</li>
<li class="">This is the fundamental advantage over traditional file-based workflows</li>
</ul>
<p><strong>2. Kernel-Level Synchronization (Automatic)</strong></p>
<ul>
<li class="">No manual management needed</li>
<li class="">Backpressure prevents one slow command from overwhelming others</li>
<li class="">If a command fails, the entire pipeline fails cleanly</li>
<li class="">Use <code>set -o pipefail</code> in bash to ensure this behavior</li>
</ul>
<p><strong>3. I/O Reduction is Massive in Bioinformatics</strong></p>
<ul>
<li class="">Traditional alignment: 100GB reads → 500GB SAM → 100GB BAM (1.1TB I/O)</li>
<li class="">Pipe alignment: 100GB reads → 100GB BAM (200GB I/O total)</li>
<li class="">Savings: 5.5x reduction in disk I/O</li>
<li class="">Practical benefit: 2-5x faster execution on disk-bound operations</li>
</ul>
<p><strong>4. Pipes Work Seamlessly with Cloud Storage</strong></p>
<ul>
<li class="">Download with <code>wget -O -</code> or <code>aws s3 cp - s3://...</code></li>
<li class="">Stream directly from S3 without local copies</li>
<li class="">Upload results on-the-fly during processing</li>
<li class="">Combine with <code>tee</code> for simultaneous processing and uploading</li>
</ul>
<p><strong>5. Production Workflows (Nextflow, Sarek) Use Pipes Extensively</strong></p>
<ul>
<li class="">Real example: Sarek&#x27;s <code>BWA_MEM</code> process pipes <code>bwa mem | samtools sort</code></li>
<li class="">This is the standard pattern for large-scale bioinformatics</li>
<li class="">Nextflow adds reliability and error handling on top</li>
<li class="">No need to choose between pipes and Nextflow—they work together</li>
</ul>
<p><strong>6. Practical Patterns You&#x27;ll Use</strong></p>
<table><thead><tr><th>Pattern</th><th>Use Case</th><th>Command</th></tr></thead><tbody><tr><td><strong>Simple chain</strong></td><td>Sequential processing</td><td><code>cmd1 | cmd2 | cmd3</code></td></tr><tr><td><strong>Branching</strong></td><td>Multiple outputs from one input</td><td><code>cmd1 | tee &gt;(cmd2) | cmd3</code></td></tr><tr><td><strong>Download + process</strong></td><td>Remote files without storage</td><td><code>wget -O - url | gunzip | process</code></td></tr><tr><td><strong>Upload + compress</strong></td><td>Direct to cloud storage</td><td><code>process | gzip | aws s3 cp -</code></td></tr><tr><td><strong>Error safety</strong></td><td>Catch failures in pipes</td><td><code>set -o pipefail</code></td></tr><tr><td><strong>Parallel processing</strong></td><td>Scale across cores/machines</td><td><code>input | parallel &#x27;process&#x27;</code></td></tr></tbody></table>
<p><strong>7. When Pipes Are Most Valuable</strong></p>
<p>✅ <strong>Use pipes for:</strong></p>
<ul>
<li class="">Massive datasets (100GB+) where I/O is the bottleneck</li>
<li class="">Cloud storage workflows where local disk is expensive</li>
<li class="">Real-time monitoring of long-running analyses</li>
<li class="">Linear processing chains (one output → next input)</li>
<li class="">Development and rapid prototyping</li>
<li class="">Nextflow process scripts (internal tool chaining)</li>
</ul>
<p>❌ <strong>Avoid pipes for:</strong></p>
<ul>
<li class="">Highly branching workflows (many different paths)</li>
<li class="">Complex error recovery (need to restart from middle)</li>
<li class="">Data that needs multiple passes through the same file</li>
<li class="">When you need to monitor intermediate results extensively</li>
</ul>
<p><strong>8. Master These Tools for Production Workflows</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)"># Essential for pipe mastery:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">set</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-o</span><span class="token plain"> pipefail              </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Error handling</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">tee</span><span class="token plain">                          </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Branching</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">pv</span><span class="token plain">                           </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Progress monitoring</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">process substitution: </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">cmd</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Streaming to files</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">AWS S3 pipes: aws s3 </span><span class="token function" style="color:hsl(221, 87%, 60%)">cp</span><span class="token plain"> - s3://</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">..</span><span class="token plain">. </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Cloud integration</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">GNU parallel                 </span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Scale across cores</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="final-thoughts">Final Thoughts<a href="#final-thoughts" class="hash-link" aria-label="Direct link to Final Thoughts" title="Direct link to Final Thoughts" translate="no">​</a></h2>
<p>Unix pipes are a cornerstone of efficient bioinformatics. They&#x27;re not just a convenient syntax—they&#x27;re a fundamental architecture for processing data that would otherwise overwhelm available disk space and I/O capacity.</p>
<p>The real power becomes apparent at scale:</p>
<ul>
<li class=""><strong>Small datasets:</strong> Pipes save time and code complexity</li>
<li class=""><strong>Large datasets:</strong> Pipes are often the only practical solution</li>
<li class=""><strong>Cloud workflows:</strong> Pipes enable streaming to/from S3 without local copies</li>
<li class=""><strong>Production pipelines:</strong> Pipes are embedded in every major workflow (Nextflow, Snakemake, etc.)</li>
</ul>
<p>By understanding how pipes work under the hood—how the kernel manages file descriptors, buffers data, and synchronizes backpressure—you can write bioinformatics workflows that are not just faster, but fundamentally more efficient.</p>
<p><strong>Start small:</strong> Use pipes in your next single-command analysis. Progress to chaining tools. Eventually, you&#x27;ll write entire bioinformatics workflows as elegant streaming pipelines—just like Sarek does.</p>
<p>Your future self (and your disk quota administrator) will thank you.</p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/river-docs/blog/tags/unix">unix</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/river-docs/blog/tags/pipes">pipes</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/river-docs/blog/tags/bioinformatics">bioinformatics</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/river-docs/blog/tags/streaming">streaming</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/river-docs/blog/tags/data-processing">data-processing</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/river-docs/blog/tags/performance">performance</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/river-docs/blog/migrate-bash-nextflow-enterprise-pipeline"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">How to Migrate from In-House Pipelines to Enterprise-Level Workflows: A Proven 3-Step Validation Framework</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/river-docs/blog/bioinformatics-containers-build-efficient-docker"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">Containers in Bioinformatics: Community Tooling and Efficient Docker Building</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-problem-data-explosion-in-bioinformatics" class="table-of-contents__link toc-highlight">The Problem: Data Explosion in Bioinformatics</a></li><li><a href="#the-solution-unix-pipes-for-streaming-data" class="table-of-contents__link toc-highlight">The Solution: Unix Pipes for Streaming Data</a></li><li><a href="#how-pipes-work-under-the-hood" class="table-of-contents__link toc-highlight">How Pipes Work Under the Hood</a><ul><li><a href="#1-file-descriptors-in-unix" class="table-of-contents__link toc-highlight">1. File Descriptors in Unix</a></li><li><a href="#2-creating-a-pipe-with-the-pipe-system-call" class="table-of-contents__link toc-highlight">2. Creating a Pipe with the Pipe System Call</a></li><li><a href="#3-the-kernel-manages-data-flow" class="table-of-contents__link toc-highlight">3. The Kernel Manages Data Flow</a></li><li><a href="#4-example-tracing-a-real-pipe" class="table-of-contents__link toc-highlight">4. Example: Tracing a Real Pipe</a></li><li><a href="#5-memory-efficiency-why-pipes-dont-load-everything-into-ram" class="table-of-contents__link toc-highlight">5. Memory Efficiency: Why Pipes Don&#39;t Load Everything into RAM</a></li></ul></li><li><a href="#practical-example-processing-a-large-fastq-file" class="table-of-contents__link toc-highlight">Practical Example: Processing a Large FASTQ File</a><ul><li><a href="#without-pipes-wasteful" class="table-of-contents__link toc-highlight">Without Pipes (Wasteful)</a></li><li><a href="#with-pipes-efficient" class="table-of-contents__link toc-highlight">With Pipes (Efficient)</a></li></ul></li><li><a href="#advanced-pipe-patterns-in-bioinformatics" class="table-of-contents__link toc-highlight">Advanced Pipe Patterns in Bioinformatics</a><ul><li><a href="#1-parallel-processing-with-gnu-parallel" class="table-of-contents__link toc-highlight">1. Parallel Processing with GNU Parallel</a></li><li><a href="#2-tee-branching-a-pipeline" class="table-of-contents__link toc-highlight">2. Tee: Branching a Pipeline</a></li><li><a href="#3-named-pipes-mkfifo-for-complex-workflows" class="table-of-contents__link toc-highlight">3. Named Pipes (mkfifo) for Complex Workflows</a></li><li><a href="#4-buffering-and-backpressure-management" class="table-of-contents__link toc-highlight">4. Buffering and Backpressure Management</a></li><li><a href="#5-process-substitution-for-multiple-outputs" class="table-of-contents__link toc-highlight">5. Process Substitution for Multiple Outputs</a></li></ul></li><li><a href="#common-pipe-gotchas-and-solutions" class="table-of-contents__link toc-highlight">Common Pipe Gotchas and Solutions</a><ul><li><a href="#1-buffering-issues-with-pipes" class="table-of-contents__link toc-highlight">1. Buffering Issues with Pipes</a></li><li><a href="#2-error-handling-in-pipes" class="table-of-contents__link toc-highlight">2. Error Handling in Pipes</a></li><li><a href="#3-monitoring-pipeline-progress" class="table-of-contents__link toc-highlight">3. Monitoring Pipeline Progress</a></li><li><a href="#4-debugging-pipe-failures" class="table-of-contents__link toc-highlight">4. Debugging Pipe Failures</a></li></ul></li><li><a href="#using-pipes-in-nextflow-modules" class="table-of-contents__link toc-highlight">Using Pipes in Nextflow Modules</a><ul><li><a href="#real-example-bwa_mem-process-from-sarek" class="table-of-contents__link toc-highlight">Real Example: BWA_MEM Process from Sarek</a></li><li><a href="#understanding-the-pipe-in-bwa_mem" class="table-of-contents__link toc-highlight">Understanding the Pipe in BWA_MEM</a></li><li><a href="#benefits-in-this-real-workflow" class="table-of-contents__link toc-highlight">Benefits in This Real Workflow</a></li><li><a href="#flexibility-through-arguments" class="table-of-contents__link toc-highlight">Flexibility Through Arguments</a></li><li><a href="#error-handling-in-nextflow-processes" class="table-of-contents__link toc-highlight">Error Handling in Nextflow Processes</a></li></ul></li><li><a href="#pipes-for-download-upload-and-cloud-storage" class="table-of-contents__link toc-highlight">Pipes for Download, Upload, and Cloud Storage</a><ul><li><a href="#example-1-download--decompress--process-no-temp-files" class="table-of-contents__link toc-highlight">Example 1: Download → Decompress → Process (No Temp Files)</a></li><li><a href="#example-2-process--compress--upload-to-s3-single-pipeline" class="table-of-contents__link toc-highlight">Example 2: Process → Compress → Upload to S3 (Single Pipeline)</a></li><li><a href="#example-3-download-from-s3--decompress--analyze-no-local-copy" class="table-of-contents__link toc-highlight">Example 3: Download from S3 → Decompress → Analyze (No Local Copy)</a></li><li><a href="#example-4-download-tarball--extract--index-no-intermediate-files" class="table-of-contents__link toc-highlight">Example 4: Download Tarball → Extract → Index (No Intermediate Files)</a></li><li><a href="#example-5-process-multiple-files-from-s3-with-gnu-parallel" class="table-of-contents__link toc-highlight">Example 5: Process Multiple Files from S3 with GNU Parallel</a></li><li><a href="#example-6-bidirectional-piping-upload-results-as-theyre-generated" class="table-of-contents__link toc-highlight">Example 6: Bidirectional Piping: Upload Results as They&#39;re Generated</a></li><li><a href="#tips-for-reliable-downloadupload-pipes" class="table-of-contents__link toc-highlight">Tips for Reliable Download/Upload Pipes</a></li><li><a href="#critical-considerations-for-cloud-pipes" class="table-of-contents__link toc-highlight">Critical Considerations for Cloud Pipes</a></li></ul></li><li><a href="#real-world-bioinformatics-pipes" class="table-of-contents__link toc-highlight">Real-World Bioinformatics Pipes</a><ul><li><a href="#example-1-rna-seq-quality-control-pipeline" class="table-of-contents__link toc-highlight">Example 1: RNA-seq Quality Control Pipeline</a></li><li><a href="#example-2-variant-calling-pipeline" class="table-of-contents__link toc-highlight">Example 2: Variant Calling Pipeline</a></li><li><a href="#example-3-fasta-processing-with-decompression" class="table-of-contents__link toc-highlight">Example 3: FASTA Processing with Decompression</a></li></ul></li><li><a href="#summary-why-pipes-matter-in-bioinformatics" class="table-of-contents__link toc-highlight">Summary: Why Pipes Matter in Bioinformatics</a><ul><li><a href="#key-takeaways" class="table-of-contents__link toc-highlight">Key Takeaways</a></li></ul></li><li><a href="#final-thoughts" class="table-of-contents__link toc-highlight">Final Thoughts</a></li></ul></div></div></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/river-docs/docs/overview">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/river-docs/blog">Blog</a></li><li class="footer__item"><a href="https://www.facebook.com/groups/1134438583997171" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/riverxdata/river" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://riverxdata.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">About RiverXData<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2026 RiverXData</div></div></div></footer></div>
</body>
</html>